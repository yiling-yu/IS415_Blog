<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
  <meta name="generator" content="distill" />

  <style type="text/css">
  /* Hide doc at startup (prevent jankiness while JS renders/transforms) */
  body {
    visibility: hidden;
  }
  </style>

 <!--radix_placeholder_import_source-->
 <!--/radix_placeholder_import_source-->

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ad0000; } /* Alert */
code span.an { color: #5e5e5e; } /* Annotation */
code span.at { color: #20794d; } /* Attribute */
code span.bn { color: #ad0000; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007ba5; } /* ControlFlow */
code span.ch { color: #20794d; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #5e5e5e; } /* Comment */
code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
code span.dt { color: #ad0000; } /* DataType */
code span.dv { color: #ad0000; } /* DecVal */
code span.er { color: #ad0000; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #ad0000; } /* Float */
code span.fu { color: #4758ab; } /* Function */
code span.im { } /* Import */
code span.in { color: #5e5e5e; } /* Information */
code span.kw { color: #007ba5; } /* Keyword */
code span.op { color: #5e5e5e; } /* Operator */
code span.ot { color: #007ba5; } /* Other */
code span.pp { color: #ad0000; } /* Preprocessor */
code span.sc { color: #20794d; } /* SpecialChar */
code span.ss { color: #20794d; } /* SpecialString */
code span.st { color: #20794d; } /* String */
code span.va { color: #111111; } /* Variable */
code span.vs { color: #20794d; } /* VerbatimString */
code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
</style>

  <!--radix_placeholder_meta_tags-->
<title>Yiling's IS415 Blog: Take-home Exercise 2</title>

<meta property="description" itemprop="description" content="Spatial Point Patterns Analysis of Airbnb Listing in Singapore."/>


<!--  https://schema.org/Article -->
<meta property="article:published" itemprop="datePublished" content="2021-09-25"/>
<meta property="article:created" itemprop="dateCreated" content="2021-09-25"/>
<meta name="article:author" content="Yu Yiling"/>

<!--  https://developers.facebook.com/docs/sharing/webmasters#markup -->
<meta property="og:title" content="Yiling&#39;s IS415 Blog: Take-home Exercise 2"/>
<meta property="og:type" content="article"/>
<meta property="og:description" content="Spatial Point Patterns Analysis of Airbnb Listing in Singapore."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:site_name" content="Yiling&#39;s IS415 Blog"/>

<!--  https://dev.twitter.com/cards/types/summary -->
<meta property="twitter:card" content="summary"/>
<meta property="twitter:title" content="Yiling&#39;s IS415 Blog: Take-home Exercise 2"/>
<meta property="twitter:description" content="Spatial Point Patterns Analysis of Airbnb Listing in Singapore."/>

<!--/radix_placeholder_meta_tags-->
  <!--radix_placeholder_rmarkdown_metadata-->

<script type="text/json" id="radix-rmarkdown-metadata">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["title","description","author","date","output"]}},"value":[{"type":"character","attributes":{},"value":["Take-home Exercise 2"]},{"type":"character","attributes":{},"value":["Spatial Point Patterns Analysis of Airbnb Listing in Singapore."]},{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","url"]}},"value":[{"type":"character","attributes":{},"value":["Yu Yiling"]},{"type":"character","attributes":{},"value":["https://www.linkedin.com/in/yiling-yu/"]}]}]},{"type":"character","attributes":{},"value":["09-25-2021"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["distill::distill_article"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["self_contained","toc","toc_depth","toc_float"]}},"value":[{"type":"logical","attributes":{},"value":[false]},{"type":"logical","attributes":{},"value":[true]},{"type":"integer","attributes":{},"value":[2]},{"type":"logical","attributes":{},"value":[true]}]}]}]}
</script>
<!--/radix_placeholder_rmarkdown_metadata-->
  
  <script type="text/json" id="radix-resource-manifest">
  {"type":"character","attributes":{},"value":["data/Airbnb_listings/29062021.csv","data/Airbnb_listings/30062019.csv","data/bandwidth.JPG","data/BusStopLocation/BusStop.cpg","data/BusStopLocation/BusStop.dbf","data/BusStopLocation/BusStop.lyr","data/BusStopLocation/BusStop.prj","data/BusStopLocation/BusStop.sbn","data/BusStopLocation/BusStop.sbx","data/BusStopLocation/BusStop.shp","data/BusStopLocation/BusStop.shp.xml","data/BusStopLocation/BusStop.shx","data/capture2.JPG","data/capture3.JPG","data/capture4.JPG","data/capture8.JPG","data/F_19_EH.png","data/F_19_PR.PNG","data/F_19_SR.png","data/F_21_EH.png","data/F_21_PR.png","data/F_21_SR.png","data/G_19_EH.png","data/G_19_PR.png","data/G_19_SR.png","data/G_21_EH.png","data/G_21_PR.png","data/G_21_SR.png","data/hawker_centres/hawker-centres-geojson.geojson","data/listings19_vs_bus_Kcross.png","data/listings19_vs_bus_Lcross.png","data/listings19_vs_hawker_Kcross.png","data/listings19_vs_hawker_Lcross.png","data/listings19_vs_hotels_Kcross.png","data/listings19_vs_hotels_Lcross.png","data/listings19_vs_MRT_Kcross.png","data/listings19_vs_MRT_Lcross.png","data/listings19_vs_tourism_Kcross.png","data/listings19_vs_tourism_Lcross.png","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.CPG","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.dbf","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.prj","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.sbn","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.sbx","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.shp","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.shp.xml","data/LTA_TrainStation_Aug2021/MRTLRTStnPtt.shx","data/OneMap_Data/hotels.csv","data/OneMap_Data/tourism.csv","data/sg/CostalOutline.dbf","data/sg/CostalOutline.prj","data/sg/CostalOutline.sbn","data/sg/CostalOutline.sbx","data/sg/CostalOutline.shp","data/sg/CostalOutline.shx","take-home-exercise-2_files/anchor-4.2.2/anchor.min.js","take-home-exercise-2_files/bowser-1.9.3/bowser.min.js","take-home-exercise-2_files/distill-2.2.21/template.v2.js","take-home-exercise-2_files/figure-html5/unnamed-chunk-10-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-11-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-12-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-12-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-12-3.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-12-4.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-12-5.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-12-6.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-12-7.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-13-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-13-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-13-3.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-13-4.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-13-5.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-13-6.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-14-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-10.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-11.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-12.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-3.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-4.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-5.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-6.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-7.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-8.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-17-9.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-18-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-10.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-11.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-12.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-3.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-4.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-5.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-6.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-7.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-8.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-20-9.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-21-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-21-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-21-3.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-21-4.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-21-5.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-21-6.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-22-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-23-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-24-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-25-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-26-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-27-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-28-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-29-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-30-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-31-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-32-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-33-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-34-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-35-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-36-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-37-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-38-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-39-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-4-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-40-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-41-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-42-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-46-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-46-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-47-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-47-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-48-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-48-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-5-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-50-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-50-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-51-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-51-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-51-3.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-51-4.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-51-5.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-51-6.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-51-7.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-52-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-52-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-54-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-54-2.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-54-3.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-54-4.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-54-5.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-54-6.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-54-7.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-56-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-58-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-60-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-62-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-64-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-66-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-68-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-70-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-72-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-74-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-76-1.png","take-home-exercise-2_files/figure-html5/unnamed-chunk-78-1.png","take-home-exercise-2_files/header-attrs-2.10/header-attrs.js","take-home-exercise-2_files/htmlwidgets-1.5.3/htmlwidgets.js","take-home-exercise-2_files/jquery-1.11.3/jquery.min.js","take-home-exercise-2_files/jquery-1.12.4/jquery.min.js","take-home-exercise-2_files/leaflet-1.3.1/images/layers-2x.png","take-home-exercise-2_files/leaflet-1.3.1/images/layers.png","take-home-exercise-2_files/leaflet-1.3.1/images/marker-icon-2x.png","take-home-exercise-2_files/leaflet-1.3.1/images/marker-icon.png","take-home-exercise-2_files/leaflet-1.3.1/images/marker-shadow.png","take-home-exercise-2_files/leaflet-1.3.1/leaflet.css","take-home-exercise-2_files/leaflet-1.3.1/leaflet.js","take-home-exercise-2_files/leaflet-binding-2.0.4.1/leaflet.js","take-home-exercise-2_files/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js","take-home-exercise-2_files/leaflet-providers-plugin-2.0.4.1/leaflet-providers-plugin.js","take-home-exercise-2_files/Leaflet.Sync-0.0.5/bower.json","take-home-exercise-2_files/Leaflet.Sync-0.0.5/L.Map.Sync.js","take-home-exercise-2_files/Leaflet.Sync-0.0.5/LICENSE","take-home-exercise-2_files/leafletfix-1.0.0/leafletfix.css","take-home-exercise-2_files/popper-2.6.0/popper.min.js","take-home-exercise-2_files/proj4-2.6.2/proj4.min.js","take-home-exercise-2_files/Proj4Leaflet-1.0.1/proj4leaflet.js","take-home-exercise-2_files/rstudio_leaflet-1.3.1/images/1px.png","take-home-exercise-2_files/rstudio_leaflet-1.3.1/rstudio_leaflet.css","take-home-exercise-2_files/tippy-6.2.7/tippy-bundle.umd.min.js","take-home-exercise-2_files/tippy-6.2.7/tippy-light-border.css","take-home-exercise-2_files/tippy-6.2.7/tippy.css","take-home-exercise-2_files/tippy-6.2.7/tippy.umd.min.js","take-home-exercise-2_files/webcomponents-2.0.0/webcomponents.js"]}
  </script>
  <!--radix_placeholder_navigation_in_header-->
<meta name="distill:offset" content="../.."/>

<script type="application/javascript">

  window.headroom_prevent_pin = false;

  window.document.addEventListener("DOMContentLoaded", function (event) {

    // initialize headroom for banner
    var header = $('header').get(0);
    var headerHeight = header.offsetHeight;
    var headroom = new Headroom(header, {
      tolerance: 5,
      onPin : function() {
        if (window.headroom_prevent_pin) {
          window.headroom_prevent_pin = false;
          headroom.unpin();
        }
      }
    });
    headroom.init();
    if(window.location.hash)
      headroom.unpin();
    $(header).addClass('headroom--transition');

    // offset scroll location for banner on hash change
    // (see: https://github.com/WickyNilliams/headroom.js/issues/38)
    window.addEventListener("hashchange", function(event) {
      window.scrollTo(0, window.pageYOffset - (headerHeight + 25));
    });

    // responsive menu
    $('.distill-site-header').each(function(i, val) {
      var topnav = $(this);
      var toggle = topnav.find('.nav-toggle');
      toggle.on('click', function() {
        topnav.toggleClass('responsive');
      });
    });

    // nav dropdowns
    $('.nav-dropbtn').click(function(e) {
      $(this).next('.nav-dropdown-content').toggleClass('nav-dropdown-active');
      $(this).parent().siblings('.nav-dropdown')
         .children('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $("body").click(function(e){
      $('.nav-dropdown-content').removeClass('nav-dropdown-active');
    });
    $(".nav-dropdown").click(function(e){
      e.stopPropagation();
    });
  });
</script>

<style type="text/css">

/* Theme (user-documented overrideables for nav appearance) */

.distill-site-nav {
  color: rgba(255, 255, 255, 0.8);
  background-color: #0F2E3D;
  font-size: 15px;
  font-weight: 300;
}

.distill-site-nav a {
  color: inherit;
  text-decoration: none;
}

.distill-site-nav a:hover {
  color: white;
}

@media print {
  .distill-site-nav {
    display: none;
  }
}

.distill-site-header {

}

.distill-site-footer {

}


/* Site Header */

.distill-site-header {
  width: 100%;
  box-sizing: border-box;
  z-index: 3;
}

.distill-site-header .nav-left {
  display: inline-block;
  margin-left: 8px;
}

@media screen and (max-width: 768px) {
  .distill-site-header .nav-left {
    margin-left: 0;
  }
}


.distill-site-header .nav-right {
  float: right;
  margin-right: 8px;
}

.distill-site-header a,
.distill-site-header .title {
  display: inline-block;
  text-align: center;
  padding: 14px 10px 14px 10px;
}

.distill-site-header .title {
  font-size: 18px;
  min-width: 150px;
}

.distill-site-header .logo {
  padding: 0;
}

.distill-site-header .logo img {
  display: none;
  max-height: 20px;
  width: auto;
  margin-bottom: -4px;
}

.distill-site-header .nav-image img {
  max-height: 18px;
  width: auto;
  display: inline-block;
  margin-bottom: -3px;
}



@media screen and (min-width: 1000px) {
  .distill-site-header .logo img {
    display: inline-block;
  }
  .distill-site-header .nav-left {
    margin-left: 20px;
  }
  .distill-site-header .nav-right {
    margin-right: 20px;
  }
  .distill-site-header .title {
    padding-left: 12px;
  }
}


.distill-site-header .nav-toggle {
  display: none;
}

.nav-dropdown {
  display: inline-block;
  position: relative;
}

.nav-dropdown .nav-dropbtn {
  border: none;
  outline: none;
  color: rgba(255, 255, 255, 0.8);
  padding: 16px 10px;
  background-color: transparent;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  margin: 0;
  margin-top: 1px;
  z-index: 2;
}

.nav-dropdown-content {
  display: none;
  position: absolute;
  background-color: white;
  min-width: 200px;
  border: 1px solid rgba(0,0,0,0.15);
  border-radius: 4px;
  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.1);
  z-index: 1;
  margin-top: 2px;
  white-space: nowrap;
  padding-top: 4px;
  padding-bottom: 4px;
}

.nav-dropdown-content hr {
  margin-top: 4px;
  margin-bottom: 4px;
  border: none;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.nav-dropdown-active {
  display: block;
}

.nav-dropdown-content a, .nav-dropdown-content .nav-dropdown-header {
  color: black;
  padding: 6px 24px;
  text-decoration: none;
  display: block;
  text-align: left;
}

.nav-dropdown-content .nav-dropdown-header {
  display: block;
  padding: 5px 24px;
  padding-bottom: 0;
  text-transform: uppercase;
  font-size: 14px;
  color: #999999;
  white-space: nowrap;
}

.nav-dropdown:hover .nav-dropbtn {
  color: white;
}

.nav-dropdown-content a:hover {
  background-color: #ddd;
  color: black;
}

.nav-right .nav-dropdown-content {
  margin-left: -45%;
  right: 0;
}

@media screen and (max-width: 768px) {
  .distill-site-header a, .distill-site-header .nav-dropdown  {display: none;}
  .distill-site-header a.nav-toggle {
    float: right;
    display: block;
  }
  .distill-site-header .title {
    margin-left: 0;
  }
  .distill-site-header .nav-right {
    margin-right: 0;
  }
  .distill-site-header {
    overflow: hidden;
  }
  .nav-right .nav-dropdown-content {
    margin-left: 0;
  }
}


@media screen and (max-width: 768px) {
  .distill-site-header.responsive {position: relative; min-height: 500px; }
  .distill-site-header.responsive a.nav-toggle {
    position: absolute;
    right: 0;
    top: 0;
  }
  .distill-site-header.responsive a,
  .distill-site-header.responsive .nav-dropdown {
    display: block;
    text-align: left;
  }
  .distill-site-header.responsive .nav-left,
  .distill-site-header.responsive .nav-right {
    width: 100%;
  }
  .distill-site-header.responsive .nav-dropdown {float: none;}
  .distill-site-header.responsive .nav-dropdown-content {position: relative;}
  .distill-site-header.responsive .nav-dropdown .nav-dropbtn {
    display: block;
    width: 100%;
    text-align: left;
  }
}

/* Site Footer */

.distill-site-footer {
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  z-index: 3;
  margin-top: 30px;
  padding-top: 30px;
  padding-bottom: 30px;
  text-align: center;
}

/* Headroom */

d-title {
  padding-top: 6rem;
}

@media print {
  d-title {
    padding-top: 4rem;
  }
}

.headroom {
  z-index: 1000;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
}

.headroom--transition {
  transition: all .4s ease-in-out;
}

.headroom--unpinned {
  top: -100px;
}

.headroom--pinned {
  top: 0;
}

/* adjust viewport for navbar height */
/* helps vertically center bootstrap (non-distill) content */
.min-vh-100 {
  min-height: calc(100vh - 100px) !important;
}

</style>

<script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
<link href="../../site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet"/>
<link href="../../site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet"/>
<script src="../../site_libs/headroom-0.9.4/headroom.min.js"></script>
<script src="../../site_libs/autocomplete-0.37.1/autocomplete.min.js"></script>
<script src="../../site_libs/fuse-6.4.1/fuse.min.js"></script>

<script type="application/javascript">

function getMeta(metaName) {
  var metas = document.getElementsByTagName('meta');
  for (let i = 0; i < metas.length; i++) {
    if (metas[i].getAttribute('name') === metaName) {
      return metas[i].getAttribute('content');
    }
  }
  return '';
}

function offsetURL(url) {
  var offset = getMeta('distill:offset');
  return offset ? offset + '/' + url : url;
}

function createFuseIndex() {

  // create fuse index
  var options = {
    keys: [
      { name: 'title', weight: 20 },
      { name: 'categories', weight: 15 },
      { name: 'description', weight: 10 },
      { name: 'contents', weight: 5 },
    ],
    ignoreLocation: true,
    threshold: 0
  };
  var fuse = new window.Fuse([], options);

  // fetch the main search.json
  return fetch(offsetURL('search.json'))
    .then(function(response) {
      if (response.status == 200) {
        return response.json().then(function(json) {
          // index main articles
          json.articles.forEach(function(article) {
            fuse.add(article);
          });
          // download collections and index their articles
          return Promise.all(json.collections.map(function(collection) {
            return fetch(offsetURL(collection)).then(function(response) {
              if (response.status === 200) {
                return response.json().then(function(articles) {
                  articles.forEach(function(article) {
                    fuse.add(article);
                  });
                })
              } else {
                return Promise.reject(
                  new Error('Unexpected status from search index request: ' +
                            response.status)
                );
              }
            });
          })).then(function() {
            return fuse;
          });
        });

      } else {
        return Promise.reject(
          new Error('Unexpected status from search index request: ' +
                      response.status)
        );
      }
    });
}

window.document.addEventListener("DOMContentLoaded", function (event) {

  // get search element (bail if we don't have one)
  var searchEl = window.document.getElementById('distill-search');
  if (!searchEl)
    return;

  createFuseIndex()
    .then(function(fuse) {

      // make search box visible
      searchEl.classList.remove('hidden');

      // initialize autocomplete
      var options = {
        autoselect: true,
        hint: false,
        minLength: 2,
      };
      window.autocomplete(searchEl, options, [{
        source: function(query, callback) {
          const searchOptions = {
            isCaseSensitive: false,
            shouldSort: true,
            minMatchCharLength: 2,
            limit: 10,
          };
          var results = fuse.search(query, searchOptions);
          callback(results
            .map(function(result) { return result.item; })
          );
        },
        templates: {
          suggestion: function(suggestion) {
            var img = suggestion.preview && Object.keys(suggestion.preview).length > 0
              ? `<img src="${offsetURL(suggestion.preview)}"</img>`
              : '';
            var html = `
              <div class="search-item">
                <h3>${suggestion.title}</h3>
                <div class="search-item-description">
                  ${suggestion.description || ''}
                </div>
                <div class="search-item-preview">
                  ${img}
                </div>
              </div>
            `;
            return html;
          }
        }
      }]).on('autocomplete:selected', function(event, suggestion) {
        window.location.href = offsetURL(suggestion.path);
      });
      // remove inline display style on autocompleter (we want to
      // manage responsive display via css)
      $('.algolia-autocomplete').css("display", "");
    })
    .catch(function(error) {
      console.log(error);
    });

});

</script>

<style type="text/css">

.nav-search {
  font-size: x-small;
}

/* Algolioa Autocomplete */

.algolia-autocomplete {
  display: inline-block;
  margin-left: 10px;
  vertical-align: sub;
  background-color: white;
  color: black;
  padding: 6px;
  padding-top: 8px;
  padding-bottom: 0;
  border-radius: 6px;
  border: 1px #0F2E3D solid;
  width: 180px;
}


@media screen and (max-width: 768px) {
  .distill-site-nav .algolia-autocomplete {
    display: none;
    visibility: hidden;
  }
  .distill-site-nav.responsive .algolia-autocomplete {
    display: inline-block;
    visibility: visible;
  }
  .distill-site-nav.responsive .algolia-autocomplete .aa-dropdown-menu {
    margin-left: 0;
    width: 400px;
    max-height: 400px;
  }
}

.algolia-autocomplete .aa-input, .algolia-autocomplete .aa-hint {
  width: 90%;
  outline: none;
  border: none;
}

.algolia-autocomplete .aa-hint {
  color: #999;
}
.algolia-autocomplete .aa-dropdown-menu {
  width: 550px;
  max-height: 70vh;
  overflow-x: visible;
  overflow-y: scroll;
  padding: 5px;
  margin-top: 3px;
  margin-left: -150px;
  background-color: #fff;
  border-radius: 5px;
  border: 1px solid #999;
  border-top: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion {
  cursor: pointer;
  padding: 5px 4px;
  border-bottom: 1px solid #eee;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion:last-of-type {
  border-bottom: none;
  margin-bottom: 2px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item {
  overflow: hidden;
  font-size: 0.8em;
  line-height: 1.4em;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item h3 {
  font-size: 1rem;
  margin-block-start: 0;
  margin-block-end: 5px;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-description {
  display: inline-block;
  overflow: hidden;
  height: 2.8em;
  width: 80%;
  margin-right: 4%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview {
  display: inline-block;
  width: 15%;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img {
  height: 3em;
  width: auto;
  display: none;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion .search-item-preview img[src] {
  display: initial;
}

.algolia-autocomplete .aa-dropdown-menu .aa-suggestion.aa-cursor {
  background-color: #eee;
}
.algolia-autocomplete .aa-dropdown-menu .aa-suggestion em {
  font-weight: bold;
  font-style: normal;
}

</style>


<!--/radix_placeholder_navigation_in_header-->
  <!--radix_placeholder_distill-->

<style type="text/css">

body {
  background-color: white;
}

.pandoc-table {
  width: 100%;
}

.pandoc-table>caption {
  margin-bottom: 10px;
}

.pandoc-table th:not([align]) {
  text-align: left;
}

.pagedtable-footer {
  font-size: 15px;
}

d-byline .byline {
  grid-template-columns: 2fr 2fr;
}

d-byline .byline h3 {
  margin-block-start: 1.5em;
}

d-byline .byline .authors-affiliations h3 {
  margin-block-start: 0.5em;
}

.authors-affiliations .orcid-id {
  width: 16px;
  height:16px;
  margin-left: 4px;
  margin-right: 4px;
  vertical-align: middle;
  padding-bottom: 2px;
}

d-title .dt-tags {
  margin-top: 1em;
  grid-column: text;
}

.dt-tags .dt-tag {
  text-decoration: none;
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0em 0.4em;
  margin-right: 0.5em;
  margin-bottom: 0.4em;
  font-size: 70%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

d-article table.gt_table td,
d-article table.gt_table th {
  border-bottom: none;
}

.html-widget {
  margin-bottom: 2.0em;
}

.l-screen-inset {
  padding-right: 16px;
}

.l-screen .caption {
  margin-left: 10px;
}

.shaded {
  background: rgb(247, 247, 247);
  padding-top: 20px;
  padding-bottom: 20px;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .html-widget {
  margin-bottom: 0;
  border: 1px solid rgba(0, 0, 0, 0.1);
}

.shaded .shaded-content {
  background: white;
}

.text-output {
  margin-top: 0;
  line-height: 1.5em;
}

.hidden {
  display: none !important;
}

d-article {
  padding-top: 2.5rem;
  padding-bottom: 30px;
}

d-appendix {
  padding-top: 30px;
}

d-article>p>img {
  width: 100%;
}

d-article h2 {
  margin: 1rem 0 1.5rem 0;
}

d-article h3 {
  margin-top: 1.5rem;
}

d-article iframe {
  border: 1px solid rgba(0, 0, 0, 0.1);
  margin-bottom: 2.0em;
  width: 100%;
}

/* Tweak code blocks */

d-article div.sourceCode code,
d-article pre code {
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
}

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: auto;
}

d-article div.sourceCode {
  background-color: white;
}

d-article div.sourceCode pre {
  padding-left: 10px;
  font-size: 12px;
  border-left: 2px solid rgba(0,0,0,0.1);
}

d-article pre {
  font-size: 12px;
  color: black;
  background: none;
  margin-top: 0;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

d-article pre a {
  border-bottom: none;
}

d-article pre a:hover {
  border-bottom: none;
  text-decoration: underline;
}

d-article details {
  grid-column: text;
  margin-bottom: 0.8em;
}

@media(min-width: 768px) {

d-article pre,
d-article div.sourceCode,
d-article div.sourceCode pre {
  overflow: visible !important;
}

d-article div.sourceCode pre {
  padding-left: 18px;
  font-size: 14px;
}

d-article pre {
  font-size: 14px;
}

}

figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

/* CSS for d-contents */

.d-contents {
  grid-column: text;
  color: rgba(0,0,0,0.8);
  font-size: 0.9em;
  padding-bottom: 1em;
  margin-bottom: 1em;
  padding-bottom: 0.5em;
  margin-bottom: 1em;
  padding-left: 0.25em;
  justify-self: start;
}

@media(min-width: 1000px) {
  .d-contents.d-contents-float {
    height: 0;
    grid-column-start: 1;
    grid-column-end: 4;
    justify-self: center;
    padding-right: 3em;
    padding-left: 2em;
  }
}

.d-contents nav h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 1em;
}

.d-contents li {
  list-style-type: none
}

.d-contents nav > ul {
  padding-left: 0;
}

.d-contents ul {
  padding-left: 1em
}

.d-contents nav ul li {
  margin-top: 0.6em;
  margin-bottom: 0.2em;
}

.d-contents nav a {
  font-size: 13px;
  border-bottom: none;
  text-decoration: none
  color: rgba(0, 0, 0, 0.8);
}

.d-contents nav a:hover {
  text-decoration: underline solid rgba(0, 0, 0, 0.6)
}

.d-contents nav > ul > li > a {
  font-weight: 600;
}

.d-contents nav > ul > li > ul {
  font-weight: inherit;
}

.d-contents nav > ul > li > ul > li {
  margin-top: 0.2em;
}


.d-contents nav ul {
  margin-top: 0;
  margin-bottom: 0.25em;
}

.d-article-with-toc h2:nth-child(2) {
  margin-top: 0;
}


/* Figure */

.figure {
  position: relative;
  margin-bottom: 2.5em;
  margin-top: 1.5em;
}

.figure img {
  width: 100%;
}

.figure .caption {
  color: rgba(0, 0, 0, 0.6);
  font-size: 12px;
  line-height: 1.5em;
}

.figure img.external {
  background: white;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.1);
  padding: 18px;
  box-sizing: border-box;
}

.figure .caption a {
  color: rgba(0, 0, 0, 0.6);
}

.figure .caption b,
.figure .caption strong, {
  font-weight: 600;
  color: rgba(0, 0, 0, 1.0);
}

/* Citations */

d-article .citation {
  color: inherit;
  cursor: inherit;
}

div.hanging-indent{
  margin-left: 1em; text-indent: -1em;
}

/* Citation hover box */

.tippy-box[data-theme~=light-border] {
  background-color: rgba(250, 250, 250, 0.95);
}

.tippy-content > p {
  margin-bottom: 0;
  padding: 2px;
}


/* Tweak 1000px media break to show more text */

@media(min-width: 1000px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 80px [middle-start] 50px [text-start kicker-end] 65px 65px 65px 65px 65px 65px 65px 65px [text-end gutter-start] 65px [middle-end] 65px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 16px;
  }

  .grid {
    grid-column-gap: 16px;
  }

  d-article {
    font-size: 1.06rem;
    line-height: 1.7em;
  }
  figure .caption, .figure .caption, figure figcaption {
    font-size: 13px;
  }
}

@media(min-width: 1180px) {
  .base-grid,
  distill-header,
  d-title,
  d-abstract,
  d-article,
  d-appendix,
  distill-appendix,
  d-byline,
  d-footnote-list,
  d-citation-list,
  distill-footer {
    grid-template-columns: [screen-start] 1fr [page-start kicker-start] 60px [middle-start] 60px [text-start kicker-end] 60px 60px 60px 60px 60px 60px 60px 60px [text-end gutter-start] 60px [middle-end] 60px [page-end gutter-end] 1fr [screen-end];
    grid-column-gap: 32px;
  }

  .grid {
    grid-column-gap: 32px;
  }
}


/* Get the citation styles for the appendix (not auto-injected on render since
   we do our own rendering of the citation appendix) */

d-appendix .citation-appendix,
.d-appendix .citation-appendix {
  font-size: 11px;
  line-height: 15px;
  border-left: 1px solid rgba(0, 0, 0, 0.1);
  padding-left: 18px;
  border: 1px solid rgba(0,0,0,0.1);
  background: rgba(0, 0, 0, 0.02);
  padding: 10px 18px;
  border-radius: 3px;
  color: rgba(150, 150, 150, 1);
  overflow: hidden;
  margin-top: -12px;
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Include appendix styles here so they can be overridden */

d-appendix {
  contain: layout style;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-top: 60px;
  margin-bottom: 0;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  color: rgba(0,0,0,0.5);
  padding-top: 60px;
  padding-bottom: 48px;
}

d-appendix h3 {
  grid-column: page-start / text-start;
  font-size: 15px;
  font-weight: 500;
  margin-top: 1em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.65);
}

d-appendix h3 + * {
  margin-top: 1em;
}

d-appendix ol {
  padding: 0 0 0 15px;
}

@media (min-width: 768px) {
  d-appendix ol {
    padding: 0 0 0 30px;
    margin-left: -30px;
  }
}

d-appendix li {
  margin-bottom: 1em;
}

d-appendix a {
  color: rgba(0, 0, 0, 0.6);
}

d-appendix > * {
  grid-column: text;
}

d-appendix > d-footnote-list,
d-appendix > d-citation-list,
d-appendix > distill-appendix {
  grid-column: screen;
}

/* Include footnote styles here so they can be overridden */

d-footnote-list {
  contain: layout style;
}

d-footnote-list > * {
  grid-column: text;
}

d-footnote-list a.footnote-backlink {
  color: rgba(0,0,0,0.3);
  padding-left: 0.5em;
}



/* Anchor.js */

.anchorjs-link {
  /*transition: all .25s linear; */
  text-decoration: none;
  border-bottom: none;
}
*:hover > .anchorjs-link {
  margin-left: -1.125em !important;
  text-decoration: none;
  border-bottom: none;
}

/* Social footer */

.social_footer {
  margin-top: 30px;
  margin-bottom: 0;
  color: rgba(0,0,0,0.67);
}

.disqus-comments {
  margin-right: 30px;
}

.disqus-comment-count {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
  cursor: pointer;
}

#disqus_thread {
  margin-top: 30px;
}

.article-sharing a {
  border-bottom: none;
  margin-right: 8px;
}

.article-sharing a:hover {
  border-bottom: none;
}

.sidebar-section.subscribe {
  font-size: 12px;
  line-height: 1.6em;
}

.subscribe p {
  margin-bottom: 0.5em;
}


.article-footer .subscribe {
  font-size: 15px;
  margin-top: 45px;
}


.sidebar-section.custom {
  font-size: 12px;
  line-height: 1.6em;
}

.custom p {
  margin-bottom: 0.5em;
}

/* Styles for listing layout (hide title) */
.layout-listing d-title, .layout-listing .d-title {
  display: none;
}

/* Styles for posts lists (not auto-injected) */


.posts-with-sidebar {
  padding-left: 45px;
  padding-right: 45px;
}

.posts-list .description h2,
.posts-list .description p {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
}

.posts-list .description h2 {
  font-weight: 700;
  border-bottom: none;
  padding-bottom: 0;
}

.posts-list h2.post-tag {
  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  padding-bottom: 12px;
}
.posts-list {
  margin-top: 60px;
  margin-bottom: 24px;
}

.posts-list .post-preview {
  text-decoration: none;
  overflow: hidden;
  display: block;
  border-bottom: 1px solid rgba(0, 0, 0, 0.1);
  padding: 24px 0;
}

.post-preview-last {
  border-bottom: none !important;
}

.posts-list .posts-list-caption {
  grid-column: screen;
  font-weight: 400;
}

.posts-list .post-preview h2 {
  margin: 0 0 6px 0;
  line-height: 1.2em;
  font-style: normal;
  font-size: 24px;
}

.posts-list .post-preview p {
  margin: 0 0 12px 0;
  line-height: 1.4em;
  font-size: 16px;
}

.posts-list .post-preview .thumbnail {
  box-sizing: border-box;
  margin-bottom: 24px;
  position: relative;
  max-width: 500px;
}
.posts-list .post-preview img {
  width: 100%;
  display: block;
}

.posts-list .metadata {
  font-size: 12px;
  line-height: 1.4em;
  margin-bottom: 18px;
}

.posts-list .metadata > * {
  display: inline-block;
}

.posts-list .metadata .publishedDate {
  margin-right: 2em;
}

.posts-list .metadata .dt-authors {
  display: block;
  margin-top: 0.3em;
  margin-right: 2em;
}

.posts-list .dt-tags {
  display: block;
  line-height: 1em;
}

.posts-list .dt-tags .dt-tag {
  display: inline-block;
  color: rgba(0,0,0,0.6);
  padding: 0.3em 0.4em;
  margin-right: 0.2em;
  margin-bottom: 0.4em;
  font-size: 60%;
  border: 1px solid rgba(0,0,0,0.2);
  border-radius: 3px;
  text-transform: uppercase;
  font-weight: 500;
}

.posts-list img {
  opacity: 1;
}

.posts-list img[data-src] {
  opacity: 0;
}

.posts-more {
  clear: both;
}


.posts-sidebar {
  font-size: 16px;
}

.posts-sidebar h3 {
  font-size: 16px;
  margin-top: 0;
  margin-bottom: 0.5em;
  font-weight: 400;
  text-transform: uppercase;
}

.sidebar-section {
  margin-bottom: 30px;
}

.categories ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

.categories li {
  color: rgba(0, 0, 0, 0.8);
  margin-bottom: 0;
}

.categories li>a {
  border-bottom: none;
}

.categories li>a:hover {
  border-bottom: 1px solid rgba(0, 0, 0, 0.4);
}

.categories .active {
  font-weight: 600;
}

.categories .category-count {
  color: rgba(0, 0, 0, 0.4);
}


@media(min-width: 768px) {
  .posts-list .post-preview h2 {
    font-size: 26px;
  }
  .posts-list .post-preview .thumbnail {
    float: right;
    width: 30%;
    margin-bottom: 0;
  }
  .posts-list .post-preview .description {
    float: left;
    width: 45%;
  }
  .posts-list .post-preview .metadata {
    float: left;
    width: 20%;
    margin-top: 8px;
  }
  .posts-list .post-preview p {
    margin: 0 0 12px 0;
    line-height: 1.5em;
    font-size: 16px;
  }
  .posts-with-sidebar .posts-list {
    float: left;
    width: 75%;
  }
  .posts-with-sidebar .posts-sidebar {
    float: right;
    width: 20%;
    margin-top: 60px;
    padding-top: 24px;
    padding-bottom: 24px;
  }
}


/* Improve display for browsers without grid (IE/Edge <= 15) */

.downlevel {
  line-height: 1.6em;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif;
  margin: 0;
}

.downlevel .d-title {
  padding-top: 6rem;
  padding-bottom: 1.5rem;
}

.downlevel .d-title h1 {
  font-size: 50px;
  font-weight: 700;
  line-height: 1.1em;
  margin: 0 0 0.5rem;
}

.downlevel .d-title p {
  font-weight: 300;
  font-size: 1.2rem;
  line-height: 1.55em;
  margin-top: 0;
}

.downlevel .d-byline {
  padding-top: 0.8em;
  padding-bottom: 0.8em;
  font-size: 0.8rem;
  line-height: 1.8em;
}

.downlevel .section-separator {
  border: none;
  border-top: 1px solid rgba(0, 0, 0, 0.1);
}

.downlevel .d-article {
  font-size: 1.06rem;
  line-height: 1.7em;
  padding-top: 1rem;
  padding-bottom: 2rem;
}


.downlevel .d-appendix {
  padding-left: 0;
  padding-right: 0;
  max-width: none;
  font-size: 0.8em;
  line-height: 1.7em;
  margin-bottom: 0;
  color: rgba(0,0,0,0.5);
  padding-top: 40px;
  padding-bottom: 48px;
}

.downlevel .footnotes ol {
  padding-left: 13px;
}

.downlevel .base-grid,
.downlevel .distill-header,
.downlevel .d-title,
.downlevel .d-abstract,
.downlevel .d-article,
.downlevel .d-appendix,
.downlevel .distill-appendix,
.downlevel .d-byline,
.downlevel .d-footnote-list,
.downlevel .d-citation-list,
.downlevel .distill-footer,
.downlevel .appendix-bottom,
.downlevel .posts-container {
  padding-left: 40px;
  padding-right: 40px;
}

@media(min-width: 768px) {
  .downlevel .base-grid,
  .downlevel .distill-header,
  .downlevel .d-title,
  .downlevel .d-abstract,
  .downlevel .d-article,
  .downlevel .d-appendix,
  .downlevel .distill-appendix,
  .downlevel .d-byline,
  .downlevel .d-footnote-list,
  .downlevel .d-citation-list,
  .downlevel .distill-footer,
  .downlevel .appendix-bottom,
  .downlevel .posts-container {
  padding-left: 150px;
  padding-right: 150px;
  max-width: 900px;
}
}

.downlevel pre code {
  display: block;
  border-left: 2px solid rgba(0, 0, 0, .1);
  padding: 0 0 0 20px;
  font-size: 14px;
}

.downlevel code, .downlevel pre {
  color: black;
  background: none;
  font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
  word-wrap: normal;
  line-height: 1.5;

  -moz-tab-size: 4;
  -o-tab-size: 4;
  tab-size: 4;

  -webkit-hyphens: none;
  -moz-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
}

.downlevel .posts-list .post-preview {
  color: inherit;
}



</style>

<script type="application/javascript">

function is_downlevel_browser() {
  if (bowser.isUnsupportedBrowser({ msie: "12", msedge: "16"},
                                 window.navigator.userAgent)) {
    return true;
  } else {
    return window.load_distill_framework === undefined;
  }
}

// show body when load is complete
function on_load_complete() {

  // add anchors
  if (window.anchors) {
    window.anchors.options.placement = 'left';
    window.anchors.add('d-article > h2, d-article > h3, d-article > h4, d-article > h5');
  }


  // set body to visible
  document.body.style.visibility = 'visible';

  // force redraw for leaflet widgets
  if (window.HTMLWidgets) {
    var maps = window.HTMLWidgets.findAll(".leaflet");
    $.each(maps, function(i, el) {
      var map = this.getMap();
      map.invalidateSize();
      map.eachLayer(function(layer) {
        if (layer instanceof L.TileLayer)
          layer.redraw();
      });
    });
  }

  // trigger 'shown' so htmlwidgets resize
  $('d-article').trigger('shown');
}

function init_distill() {

  init_common();

  // create front matter
  var front_matter = $('<d-front-matter></d-front-matter>');
  $('#distill-front-matter').wrap(front_matter);

  // create d-title
  $('.d-title').changeElementType('d-title');

  // create d-byline
  var byline = $('<d-byline></d-byline>');
  $('.d-byline').replaceWith(byline);

  // create d-article
  var article = $('<d-article></d-article>');
  $('.d-article').wrap(article).children().unwrap();

  // move posts container into article
  $('.posts-container').appendTo($('d-article'));

  // create d-appendix
  $('.d-appendix').changeElementType('d-appendix');

  // flag indicating that we have appendix items
  var appendix = $('.appendix-bottom').children('h3').length > 0;

  // replace footnotes with <d-footnote>
  $('.footnote-ref').each(function(i, val) {
    appendix = true;
    var href = $(this).attr('href');
    var id = href.replace('#', '');
    var fn = $('#' + id);
    var fn_p = $('#' + id + '>p');
    fn_p.find('.footnote-back').remove();
    var text = fn_p.html();
    var dtfn = $('<d-footnote></d-footnote>');
    dtfn.html(text);
    $(this).replaceWith(dtfn);
  });
  // remove footnotes
  $('.footnotes').remove();

  // move refs into #references-listing
  $('#references-listing').replaceWith($('#refs'));

  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    var id = $(this).attr('id');
    $('.d-contents a[href="#' + id + '"]').parent().remove();
    appendix = true;
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('d-appendix'));
  });

  // show d-appendix if we have appendix content
  $("d-appendix").css('display', appendix ? 'grid' : 'none');

  // localize layout chunks to just output
  $('.layout-chunk').each(function(i, val) {

    // capture layout
    var layout = $(this).attr('data-layout');

    // apply layout to markdown level block elements
    var elements = $(this).children().not('details, div.sourceCode, pre, script');
    elements.each(function(i, el) {
      var layout_div = $('<div class="' + layout + '"></div>');
      if (layout_div.hasClass('shaded')) {
        var shaded_content = $('<div class="shaded-content"></div>');
        $(this).wrap(shaded_content);
        $(this).parent().wrap(layout_div);
      } else {
        $(this).wrap(layout_div);
      }
    });


    // unwrap the layout-chunk div
    $(this).children().unwrap();
  });

  // remove code block used to force  highlighting css
  $('.distill-force-highlighting-css').parent().remove();

  // remove empty line numbers inserted by pandoc when using a
  // custom syntax highlighting theme
  $('code.sourceCode a:empty').remove();

  // load distill framework
  load_distill_framework();

  // wait for window.distillRunlevel == 4 to do post processing
  function distill_post_process() {

    if (!window.distillRunlevel || window.distillRunlevel < 4)
      return;

    // hide author/affiliations entirely if we have no authors
    var front_matter = JSON.parse($("#distill-front-matter").html());
    var have_authors = front_matter.authors && front_matter.authors.length > 0;
    if (!have_authors)
      $('d-byline').addClass('hidden');

    // article with toc class
    $('.d-contents').parent().addClass('d-article-with-toc');

    // strip links that point to #
    $('.authors-affiliations').find('a[href="#"]').removeAttr('href');

    // add orcid ids
    $('.authors-affiliations').find('.author').each(function(i, el) {
      var orcid_id = front_matter.authors[i].orcidID;
      if (orcid_id) {
        var a = $('<a></a>');
        a.attr('href', 'https://orcid.org/' + orcid_id);
        var img = $('<img></img>');
        img.addClass('orcid-id');
        img.attr('alt', 'ORCID ID');
        img.attr('src','data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg==');
        a.append(img);
        $(this).append(a);
      }
    });

    // hide elements of author/affiliations grid that have no value
    function hide_byline_column(caption) {
      $('d-byline').find('h3:contains("' + caption + '")').parent().css('visibility', 'hidden');
    }

    // affiliations
    var have_affiliations = false;
    for (var i = 0; i<front_matter.authors.length; ++i) {
      var author = front_matter.authors[i];
      if (author.affiliation !== "&nbsp;") {
        have_affiliations = true;
        break;
      }
    }
    if (!have_affiliations)
      $('d-byline').find('h3:contains("Affiliations")').css('visibility', 'hidden');

    // published date
    if (!front_matter.publishedDate)
      hide_byline_column("Published");

    // document object identifier
    var doi = $('d-byline').find('h3:contains("DOI")');
    var doi_p = doi.next().empty();
    if (!front_matter.doi) {
      // if we have a citation and valid citationText then link to that
      if ($('#citation').length > 0 && front_matter.citationText) {
        doi.html('Citation');
        $('<a href="#citation"></a>')
          .text(front_matter.citationText)
          .appendTo(doi_p);
      } else {
        hide_byline_column("DOI");
      }
    } else {
      $('<a></a>')
         .attr('href', "https://doi.org/" + front_matter.doi)
         .html(front_matter.doi)
         .appendTo(doi_p);
    }

     // change plural form of authors/affiliations
    if (front_matter.authors.length === 1) {
      var grid = $('.authors-affiliations');
      grid.children('h3:contains("Authors")').text('Author');
      grid.children('h3:contains("Affiliations")').text('Affiliation');
    }

    // remove d-appendix and d-footnote-list local styles
    $('d-appendix > style:first-child').remove();
    $('d-footnote-list > style:first-child').remove();

    // move appendix-bottom entries to the bottom
    $('.appendix-bottom').appendTo('d-appendix').children().unwrap();
    $('.appendix-bottom').remove();

    // hoverable references
    $('span.citation[data-cites]').each(function() {
      var refHtml = $('#ref-' + $(this).attr('data-cites')).html();
      window.tippy(this, {
        allowHTML: true,
        content: refHtml,
        maxWidth: 500,
        interactive: true,
        interactiveBorder: 10,
        theme: 'light-border',
        placement: 'bottom-start'
      });
    });

    // clear polling timer
    clearInterval(tid);

    // show body now that everything is ready
    on_load_complete();
  }

  var tid = setInterval(distill_post_process, 50);
  distill_post_process();

}

function init_downlevel() {

  init_common();

   // insert hr after d-title
  $('.d-title').after($('<hr class="section-separator"/>'));

  // check if we have authors
  var front_matter = JSON.parse($("#distill-front-matter").html());
  var have_authors = front_matter.authors && front_matter.authors.length > 0;

  // manage byline/border
  if (!have_authors)
    $('.d-byline').remove();
  $('.d-byline').after($('<hr class="section-separator"/>'));
  $('.d-byline a').remove();

  // remove toc
  $('.d-contents').remove();

  // move appendix elements
  $('h1.appendix, h2.appendix').each(function(i, val) {
    $(this).changeElementType('h3');
  });
  $('h3.appendix').each(function(i, val) {
    $(this).nextUntil($('h1, h2, h3')).addBack().appendTo($('.d-appendix'));
  });


  // inject headers into references and footnotes
  var refs_header = $('<h3></h3>');
  refs_header.text('References');
  $('#refs').prepend(refs_header);

  var footnotes_header = $('<h3></h3');
  footnotes_header.text('Footnotes');
  $('.footnotes').children('hr').first().replaceWith(footnotes_header);

  // move appendix-bottom entries to the bottom
  $('.appendix-bottom').appendTo('.d-appendix').children().unwrap();
  $('.appendix-bottom').remove();

  // remove appendix if it's empty
  if ($('.d-appendix').children().length === 0)
    $('.d-appendix').remove();

  // prepend separator above appendix
  $('.d-appendix').before($('<hr class="section-separator" style="clear: both"/>'));

  // trim code
  $('pre>code').each(function(i, val) {
    $(this).html($.trim($(this).html()));
  });

  // move posts-container right before article
  $('.posts-container').insertBefore($('.d-article'));

  $('body').addClass('downlevel');

  on_load_complete();
}


function init_common() {

  // jquery plugin to change element types
  (function($) {
    $.fn.changeElementType = function(newType) {
      var attrs = {};

      $.each(this[0].attributes, function(idx, attr) {
        attrs[attr.nodeName] = attr.nodeValue;
      });

      this.replaceWith(function() {
        return $("<" + newType + "/>", attrs).append($(this).contents());
      });
    };
  })(jQuery);

  // prevent underline for linked images
  $('a > img').parent().css({'border-bottom' : 'none'});

  // mark non-body figures created by knitr chunks as 100% width
  $('.layout-chunk').each(function(i, val) {
    var figures = $(this).find('img, .html-widget');
    if ($(this).attr('data-layout') !== "l-body") {
      figures.css('width', '100%');
    } else {
      figures.css('max-width', '100%');
      figures.filter("[width]").each(function(i, val) {
        var fig = $(this);
        fig.css('width', fig.attr('width') + 'px');
      });

    }
  });

  // auto-append index.html to post-preview links in file: protocol
  // and in rstudio ide preview
  $('.post-preview').each(function(i, val) {
    if (window.location.protocol === "file:")
      $(this).attr('href', $(this).attr('href') + "index.html");
  });

  // get rid of index.html references in header
  if (window.location.protocol !== "file:") {
    $('.distill-site-header a[href]').each(function(i,val) {
      $(this).attr('href', $(this).attr('href').replace("index.html", "./"));
    });
  }

  // add class to pandoc style tables
  $('tr.header').parent('thead').parent('table').addClass('pandoc-table');
  $('.kable-table').children('table').addClass('pandoc-table');

  // add figcaption style to table captions
  $('caption').parent('table').addClass("figcaption");

  // initialize posts list
  if (window.init_posts_list)
    window.init_posts_list();

  // implmement disqus comment link
  $('.disqus-comment-count').click(function() {
    window.headroom_prevent_pin = true;
    $('#disqus_thread').toggleClass('hidden');
    if (!$('#disqus_thread').hasClass('hidden')) {
      var offset = $(this).offset();
      $(window).resize();
      $('html, body').animate({
        scrollTop: offset.top - 35
      });
    }
  });
}

document.addEventListener('DOMContentLoaded', function() {
  if (is_downlevel_browser())
    init_downlevel();
  else
    window.addEventListener('WebComponentsReady', init_distill);
});

</script>

<!--/radix_placeholder_distill-->
  <script src="../../site_libs/header-attrs-2.10/header-attrs.js"></script>
  <script src="../../site_libs/jquery-1.11.3/jquery.min.js"></script>
  <script src="../../site_libs/popper-2.6.0/popper.min.js"></script>
  <link href="../../site_libs/tippy-6.2.7/tippy.css" rel="stylesheet" />
  <link href="../../site_libs/tippy-6.2.7/tippy-light-border.css" rel="stylesheet" />
  <script src="../../site_libs/tippy-6.2.7/tippy.umd.min.js"></script>
  <script src="../../site_libs/anchor-4.2.2/anchor.min.js"></script>
  <script src="../../site_libs/bowser-1.9.3/bowser.min.js"></script>
  <script src="../../site_libs/webcomponents-2.0.0/webcomponents.js"></script>
  <script src="../../site_libs/distill-2.2.21/template.v2.js"></script>
  <!--radix_placeholder_site_in_header-->
<!--/radix_placeholder_site_in_header-->


</head>

<body>

<!--radix_placeholder_front_matter-->

<script id="distill-front-matter" type="text/json">
{"title":"Take-home Exercise 2","description":"Spatial Point Patterns Analysis of Airbnb Listing in Singapore.","authors":[{"author":"Yu Yiling","authorURL":"https://www.linkedin.com/in/yiling-yu/","affiliation":"&nbsp;","affiliationURL":"#","orcidID":""}],"publishedDate":"2021-09-25T00:00:00.000+08:00","citationText":"Yiling, 2021"}
</script>

<!--/radix_placeholder_front_matter-->
<!--radix_placeholder_navigation_before_body-->
<header class="header header--fixed" role="banner">
<nav class="distill-site-nav distill-site-header">
<div class="nav-left">
<a href="../../index.html" class="title">Yiling's IS415 Blog</a>
<input id="distill-search" class="nav-search hidden" type="text" placeholder="Search..."/>
</div>
<div class="nav-right">
<div class="nav-dropdown">
<button class="nav-dropbtn">
Take-home Exercise
 
<span class="down-arrow">&#x25BE;</span>
</button>
<div class="nav-dropdown-content">
<a href="../..//posts/2021-09-25-take-home-exercise-1/index.html">Take-home Exercise 1</a>
<a href="../..//posts/2021-09-25-take-home-exercise-2/index.html">Take-home Exercise 2</a>
<a href="../..//posts/2021-11-05-take-home-exercise-3/index.html">Take-home Exercise 3</a>
</div>
</div>
<a href="../..//posts/welcome/index.html">About</a>
<a href="javascript:void(0);" class="nav-toggle">&#9776;</a>
</div>
</nav>
</header>
<!--/radix_placeholder_navigation_before_body-->
<!--radix_placeholder_site_before_body-->
<!--/radix_placeholder_site_before_body-->

<div class="d-title">
<h1>Take-home Exercise 2</h1>
<!--radix_placeholder_categories-->
<!--/radix_placeholder_categories-->
<p><p>Spatial Point Patterns Analysis of Airbnb Listing in Singapore.</p></p>
</div>

<div class="d-byline">
  Yu Yiling <a href="https://www.linkedin.com/in/yiling-yu/" class="uri">https://www.linkedin.com/in/yiling-yu/</a> 
  
<br/>09-25-2021
</div>

<div class="d-article">
<div class="d-contents d-contents-float">
<nav class="l-text toc figcaption" id="TOC">
<h3>Contents</h3>
<ul>
<li><a href="#take-home-exercise-2-requirements">Take-home Exercise 2 requirements</a></li>
<li><a href="#things-learned-from-take-home-exercise-1">Things learned from Take-home Exercise 1</a></li>
<li><a href="#note">Note!</a></li>
<li><a href="#data-used">Data used</a></li>
<li><a href="#install-packages">1. Install packages</a></li>
<li><a href="#import-and-transform-data">2. Import and transform data</a>
<ul>
<li><a href="#have-a-glance-at-the-point-maps">Have a glance at the point maps</a></li>
</ul></li>
<li><a href="#geospatial-data-wrangling">3. Geospatial data wrangling</a>
<ul>
<li><a href="#a.-converting-sf-data-frames-to-spatial-class">a. Converting sf data frames to Spatial class</a></li>
<li><a href="#b.-converting-the-spatial-class-into-generic-sp-object">b. Converting the Spatial class into generic sp object</a></li>
<li><a href="#c.-converting-the-generic-sp-object-into-spatstats-ppp-object">c.Converting the generic sp object into spatstats ppp object</a></li>
<li><a href="#d.-handling-duplicate-points">d.Handling duplicate points</a></li>
<li><a href="#e.-creating-owin-object">e. Creating owin object</a></li>
<li><a href="#f.-combining-point-events-object-and-owin-object">f.Combining point events object and owin object</a></li>
</ul></li>
<li><a href="#section-a-airbnb-distribution-in-2019">4. Section A: Airbnb Distribution in 2019</a></li>
<li><a href="#first-order-spatial-point-patterns-analysis-a.-deriving-kernel-density-estimation-kde-layer-for-visualising-and-exploring-the-intensity-of-point-processes">4.1 First-order Spatial Point Patterns Analysis: A. deriving kernel density estimation (KDE) layer for visualising and exploring the intensity of point processes</a>
<ul>
<li><a href="#a.-computing-kernel-density-estimation-using-automatic-bandwidth-selection-method">a. Computing kernel density estimation using automatic bandwidth selection method</a></li>
<li><a href="#b.-computing-kernel-density-estimation-using-fixedadaptive-bandwidth-method">b. Computing kernel density estimation using fixed/adaptive bandwidth method</a></li>
<li><a href="#c.-convert-kde-output-into-raster-and-display-the-kernel-density-maps-on-openstreetmap-of-singapore">c.Convert KDE output into raster and display the kernel density maps on openstreetmap of Singapore</a></li>
</ul></li>
<li><a href="#second-order-spatial-point-patterns-analysis-cross-k-function-and-cross-l-function">4.2 Second-order Spatial Point Patterns Analysis: Cross K-Function and Cross L-Function</a>
<ul>
<li><a href="#a.-prepare-merged-ppp-objects-by-using-superimpose">a. Prepare merged ppp objects by using superimpose()</a></li>
<li><a href="#b.-second-order-multi-tpye-point-patterns-analysis-cross-k-function">b. Second-order Multi-tpye Point Patterns Analysis: Cross K-Function</a></li>
<li><a href="#c.-second-order-multi-tpye-point-patterns-analysis-cross-l-function">c.Second-order Multi-tpye Point Patterns Analysis: Cross L-Function</a></li>
<li><a href="#d.-summary-cross-k-function-and-cross-l-function">d.Summary: Cross K-Function and Cross L-Function</a></li>
</ul></li>
<li><a href="#section-b-impact-of-covid-19">5. Section B: Impact of COVID-19</a></li>
<li><a href="#first-order-spatial-point-patterns-analysis-a.-derive-kernel-density-maps-of-all-airbnb-listings-and-airbnb-by-room-type-as-at-june-2019-and-june-2021">5.1 First-order Spatial Point Patterns Analysis: A. Derive kernel density maps of all Airbnb listings and Airbnb by room type as at June 2019 and June 2021</a>
<ul>
<li><a href="#a.-eda-and-geospatial-data-wrangling">a. EDA and Geospatial data wrangling</a></li>
<li><a href="#b.-compute-kernel-density-estimation-using-fixed-bandwidth">b. Compute kernel density estimation using fixed bandwidth</a></li>
<li><a href="#c.-convert-kde-output-into-raster-and-display-the-kernel-density-maps-on-openstreetmap-of-singapore-1">c.Convert KDE output into raster and display the kernel density maps on openstreetmap of Singapore</a></li>
</ul></li>
<li><a href="#second-order-spatial-point-patterns-analysis-g-function-and-f-function">5.2 Second-order Spatial Point Patterns Analysis: G-Function and F-Function</a>
<ul>
<li><a href="#note-3">Note</a></li>
<li><a href="#a.-prepare-split-ppp-objects">a. Prepare split ppp objects</a></li>
<li><a href="#b.-analysing-spatial-point-process-using-g-function">b. Analysing Spatial Point Process Using G-Function</a></li>
<li><a href="#c.-analysing-spatial-point-process-using-f-function">c.Analysing Spatial Point Process Using F-Function</a></li>
<li><a href="#d.-summary-g-function-and-k-function">d.Summary: G-Function and K-Function</a></li>
</ul></li>
</ul>
</nav>
</div>
<h1 id="take-home-exercise-2-requirements">Take-home Exercise 2 requirements</h1>
<ul>
<li>Section A: Airbnb Distribution in 2019
<ul>
<li>In this section, you are tasked to investigate if the distribution of Airbnb listings are affected by location factors such as near to existing hotels, MRT services and tourist attractions. For the purpose of this analysis, Airbnb listings as at June 2019 should be used.</li>
</ul></li>
<li>Section B: Impact of COVID-19
<ul>
<li>In this section, you are required to analyse the impact of COVID-19 on Airbnb business in Singapore by comparing Airbnb listings data on June 2019 and June 2021.</li>
</ul></li>
</ul>
<h1 id="things-learned-from-take-home-exercise-1">Things learned from Take-home Exercise 1</h1>
<ul>
<li>For the interactive map, keep the legend out of the map view</li>
<li>Describe the purpose of each step</li>
<li>Explain packages used</li>
</ul>
<h1 id="note">Note!</h1>
<ul>
<li>For some code chunks, it takes a lot of time to load the outputs, in order for everything to run/knit/push smoothly, I have made some of them eval=FALSE and insert images of their outputs in this webpage. Im also very sorry that I have disabled all the maps with view mode because my Netlify refused to load them.</li>
</ul>
<h1 id="data-used">Data used</h1>
<ul>
<li>SG Airbnb listings for June 2019 and June 2021 from <a href="http://insideairbnb.com/get-the-data.html">Inside Airbnb</a></li>
<li>Hotels, tourist attractions from SLA OneMap Service by using <a href="https://cran.r-project.org/web/packages/onemapsgapi/index.html">onemapsgapi</a></li>
<li>SG MRT stations and SG bus stops shapefiles from <a href="https://datamall.lta.gov.sg/content/datamall/en/search_datasets.html">LTA DataMall</a></li>
<li>SG Hawker Centres in GEOJASON format from <a href="https://data.gov.sg/dataset/hawker-centres?resource_id=8a6c2f75-5511-4e03-b8f2-23ce67d30b28">data.gov.sg</a></li>
<li>CostalOutline, a polygon feature data showing the national boundary of Singapore. It is provided by SLA and is in ESRI shapefile format.</li>
</ul>
<h1 id="install-packages">1. Install packages</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>packages</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>'maptools'</span>, <span class='st'>'sf'</span>, <span class='st'>'raster'</span>,<span class='st'>'spatstat'</span>, <span class='st'>'tmap'</span>,<span class='st'>'tidyverse'</span><span class='op'>)</span>
<span class='kw'>for</span> <span class='op'>(</span><span class='va'>p</span> <span class='kw'>in</span> <span class='va'>packages</span><span class='op'>)</span><span class='op'>{</span>
<span class='kw'>if</span><span class='op'>(</span><span class='op'>!</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'>p</span>, character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/utils/install.packages.html'>install.packages</a></span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'>p</span>,character.only <span class='op'>=</span> <span class='cn'>T</span><span class='op'>)</span>
<span class='op'>}</span>
</code></pre>
</div>
</div>
<ul>
<li>six R packages will be used for the following purposes:
<ul>
<li>sf, a relatively new R package specially designed to import, manage and process vector-based geospatial data in R.</li>
<li>spatstat, which has a wide range of useful functions for point pattern analysis. In this hands-on exercise, it will be used to perform 1st- and 2nd-order spatial point patterns analysis and derive kernel density estimation (KDE) layer.</li>
<li>raster which reads, writes, manipulates, analyses and model of gridded spatial data (i.e.raster). In this hands-on exercise, it will be used to convert image output generate by spatstat into raster format.</li>
<li>tidyverse for performing data science tasks such as importing, wrangling and visualising data.</li>
<li>maptools which provides a set of tools for manipulating geographic data. In this hands-on exercise, we mainly use it to convert Spatial objects into ppp format of spatstat.</li>
<li>tmap which provides functions for plotting cartographic quality static point patterns maps or interactive maps by using leaflet API.</li>
</ul></li>
</ul>
<h1 id="import-and-transform-data">2. Import and transform data</h1>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>MRT_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/LTA_TrainStation_Aug2021"</span>, layer<span class='op'>=</span><span class='st'>"MRTLRTStnPtt"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `MRTLRTStnPtt&#39; from data source 
  `C:\yiling-yu\IS415_Blog\_posts\2021-09-25-take-home-exercise-2\data\LTA_TrainStation_Aug2021&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 171 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 6138.311 ymin: 27555.06 xmax: 45254.86 ymax: 47854.2
Projected CRS: SVY21</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/sg"</span>, layer<span class='op'>=</span><span class='st'>"CostalOutline"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `CostalOutline&#39; from data source 
  `C:\yiling-yu\IS415_Blog\_posts\2021-09-25-take-home-exercise-2\data\sg&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 60 features and 4 fields
Geometry type: POLYGON
Dimension:     XY
Bounding box:  xmin: 2663.926 ymin: 16357.98 xmax: 56047.79 ymax: 50244.03
Projected CRS: SVY21</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>bus_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span>dsn <span class='op'>=</span> <span class='st'>"data/BusStopLocation"</span>, layer<span class='op'>=</span><span class='st'>"BusStop"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `BusStop&#39; from data source 
  `C:\yiling-yu\IS415_Blog\_posts\2021-09-25-take-home-exercise-2\data\BusStopLocation&#39; 
  using driver `ESRI Shapefile&#39;
Simple feature collection with 5156 features and 3 fields
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: 4427.938 ymin: 26482.1 xmax: 48282.5 ymax: 52983.82
Projected CRS: SVY21</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/Airbnb_listings/29062021.csv"</span><span class='op'>)</span>
<span class='va'>listings19</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/Airbnb_listings/30062019.csv"</span><span class='op'>)</span>

<span class='va'>hotels</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/OneMap_Data/hotels.csv"</span><span class='op'>)</span>
<span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='fu'>read_csv</span><span class='op'>(</span><span class='st'>"data/OneMap_Data/tourism.csv"</span><span class='op'>)</span>
<span class='va'>hawker_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_read</span><span class='op'>(</span><span class='st'>"data/hawker_centres/hawker-centres-geojson.geojson"</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Reading layer `hawker-centres-geojson&#39; from data source 
  `C:\yiling-yu\IS415_Blog\_posts\2021-09-25-take-home-exercise-2\data\hawker_centres\hawker-centres-geojson.geojson&#39; 
  using driver `GeoJSON&#39;
Simple feature collection with 125 features and 2 fields
Geometry type: POINT
Dimension:     XYZ
Bounding box:  xmin: 103.6974 ymin: 1.272716 xmax: 103.9882 ymax: 1.449217
z_range:       zmin: 0 zmax: 0
Geodetic CRS:  WGS 84</code></pre>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>listings21</span>, 
                       coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"longitude"</span>, <span class='st'>"latitude"</span><span class='op'>)</span>,
                       crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='va'>listings19_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>listings19</span>, 
                       coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"longitude"</span>, <span class='st'>"latitude"</span><span class='op'>)</span>,
                       crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='va'>hotels_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>hotels</span>, 
                       coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lng"</span>, <span class='st'>"Lat"</span><span class='op'>)</span>,
                       crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='va'>tourism_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_as_sf</span><span class='op'>(</span><span class='va'>tourism</span>, 
                       coords <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"Lng"</span>, <span class='st'>"Lat"</span><span class='op'>)</span>,
                       crs<span class='op'>=</span><span class='fl'>4326</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>st_transform</span><span class='op'>(</span>crs <span class='op'>=</span> <span class='fl'>3414</span><span class='op'>)</span>

<span class='va'>MRT_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>MRT_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
<span class='va'>sg_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>sg_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
<span class='va'>bus_sf</span> <span class='op'>&lt;-</span> <span class='fu'>st_set_crs</span><span class='op'>(</span><span class='va'>bus_sf</span>, <span class='fl'>3414</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="have-a-glance-at-the-point-maps">Have a glance at the point maps</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># tmap_mode("view")</span>
<span class='fu'>tmap_options</span><span class='op'>(</span>check.and.fix <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_polygons</span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>listings19_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span>alpha<span class='op'>=</span><span class='fl'>0.4</span>,
          col<span class='op'>=</span><span class='st'>"blue"</span>,
          size<span class='op'>=</span><span class='fl'>0.05</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>listings21_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span>alpha<span class='op'>=</span><span class='fl'>0.4</span>,
          col<span class='op'>=</span><span class='st'>"red"</span>,
          size<span class='op'>=</span><span class='fl'>0.05</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_layout</span><span class='op'>(</span>main.title <span class='op'>=</span> <span class='st'>"2019 and 2021 Airbnb Listings"</span>,
          main.title.position <span class='op'>=</span> <span class='st'>"center"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-4-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h1 id="geospatial-data-wrangling">3. Geospatial data wrangling</h1>
<h2 id="a.-converting-sf-data-frames-to-spatial-class">a. Converting sf data frames to Spatial class</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>MRT</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>MRT_sf</span><span class='op'>)</span>
<span class='va'>listings21</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>listings21_sf</span><span class='op'>)</span>
<span class='va'>listings19</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>listings19_sf</span><span class='op'>)</span>
<span class='va'>hotels</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>hotels_sf</span><span class='op'>)</span>
<span class='va'>tourism</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>tourism_sf</span><span class='op'>)</span>
<span class='va'>sg</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='fu'>st_zm</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>hawker</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>hawker_sf</span><span class='op'>)</span>
<span class='va'>bus</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>bus_sf</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="b.-converting-the-spatial-class-into-generic-sp-object">b. Converting the Spatial class into generic sp object</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>MRT_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>MRT</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>listings21_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>listings21</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>listings19_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>listings19</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>hotels_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hotels</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>tourism_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>tourism</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>sg_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>sg</span>, <span class='st'>"SpatialPolygons"</span><span class='op'>)</span>
<span class='va'>hawker_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hawker</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
<span class='va'>bus_sp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>bus</span>, <span class='st'>"SpatialPoints"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="c.-converting-the-generic-sp-object-into-spatstats-ppp-object">c.Converting the generic sp object into spatstats ppp object</h2>
<ul>
<li>spatstat requires the analytical data in ppp object form</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>MRT_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>MRT_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>listings21_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>listings21_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>listings19_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>listings19_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>hotels_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hotels_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>tourism_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>tourism_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>hawker_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>hawker_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>bus_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>bus_sp</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>MRT_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Planar point pattern:  171 points
Average intensity 2.153565e-07 points per square unit

Coordinates are given to 3 decimal places
i.e. rounded to the nearest multiple of 0.001 units

Window: rectangle = [6138.31, 45254.86] x [27555.06, 47854.2] units
                    (39120 x 20300 units)
Window area = 794032000 square units</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>listings21_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Planar point pattern:  4238 points
Average intensity 5.114513e-06 points per square unit

*Pattern contains duplicated points*

Coordinates are given to 3 decimal places
i.e. rounded to the nearest multiple of 0.001 units

Window: rectangle = [7406.99, 43337.89] x [25330, 48391.55] units
                    (35930 x 23060 units)
Window area = 828622000 square units</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>listings19_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Planar point pattern:  8293 points
Average intensity 9.345289e-06 points per square unit

*Pattern contains duplicated points*

Coordinates are given to 3 decimal places
i.e. rounded to the nearest multiple of 0.001 units

Window: rectangle = [7215.57, 44098.31] x [25166.35, 49226.35] units
                    (36880 x 24060 units)
Window area = 887399000 square units</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>hotels_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Planar point pattern:  422 points
Average intensity 5.58414e-07 points per square unit

*Pattern contains duplicated points*

Coordinates are given to 3 decimal places
i.e. rounded to the nearest multiple of 0.001 units

Window: rectangle = [5939.24, 45334.18] x [25379.44, 44562.4] units
                    (39390 x 19180 units)
Window area = 755712000 square units</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>tourism_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Planar point pattern:  107 points
Average intensity 3.947904e-13 points per square unit

*Pattern contains duplicated points*

Coordinates are given to 2 decimal places
i.e. rounded to the nearest multiple of 0.01 units

Window: rectangle = [-13597396, 43660] x [22869, 19891558] units
                    (13640000 x 19870000 units)
Window area = 2.7103e+14 square units</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>hawker_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Planar point pattern:  125 points
Average intensity 1.978798e-07 points per square unit

Coordinates are given to 2 decimal places
i.e. rounded to the nearest multiple of 0.01 units

Window: rectangle = [12874.19, 45241.4] x [28355.97, 47872.53] units
                    (32370 x 19520 units)
Window area = 631697000 square units</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>bus_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Planar point pattern:  5156 points
Average intensity 4.436334e-06 points per square unit

Coordinates are given to 3 decimal places
i.e. rounded to the nearest multiple of 0.001 units

Window: rectangle = [4427.94, 48282.5] x [26482.1, 52983.82] units
                    (43850 x 26500 units)
Window area = 1162220000 square units</code></pre>
</div>
<ul>
<li>listings21_ppp, listings19_ppp, hotels_ppp and tourism_ppp contian duplicate points</li>
</ul>
<h2 id="d.-handling-duplicate-points">d.Handling duplicate points</h2>
<ul>
<li>To handle duplicate: jittering, which will add a small perturbation to the duplicate points so that they do not occupy the exact same space.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>listings21_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>listings21_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>listings19_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>listings19_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotels_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>hotels_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>hotels_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourism_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>tourism_ppp</span>, 
                             retry<span class='op'>=</span><span class='cn'>TRUE</span>, 
                             nsim<span class='op'>=</span><span class='fl'>1</span>, 
                             drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>tourism_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>MRT_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>hawker_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>bus_ppp</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
</div>
<h2 id="e.-creating-owin-object">e. Creating owin object</h2>
<ul>
<li>When analysing spatial point patterns, it is a good practice to confine the analysis with a geographical area like Singapore boundary. In spatstat, an object called owin is specially designed to represent this polygonal region.</li>
</ul>
<h4 id="covert-sg-spatialpolygon-object-into-owin-object-of-spatstat">covert sg spatialpolygon object into owin object of spatstat</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>sg_owin</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>sg_sp</span>, <span class='st'>"owin"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>sg_owin</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-10-1.png" width="624" /></p>
</div>
<h2 id="f.-combining-point-events-object-and-owin-object">f.Combining point events object and owin object</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21SG_ppp</span> <span class='op'>=</span> <span class='va'>listings21_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>listings19SG_ppp</span> <span class='op'>=</span> <span class='va'>listings19_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>hotelsSG_ppp</span> <span class='op'>=</span> <span class='va'>hotels_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>tourismSG_ppp</span> <span class='op'>=</span> <span class='va'>tourism_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>MRTSG_ppp</span> <span class='op'>=</span> <span class='va'>MRT_ppp</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>hawkerSG_ppp</span> <span class='op'>=</span> <span class='va'>hawker_ppp</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>busSG_ppp</span> <span class='op'>=</span> <span class='va'>bus_ppp</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings21SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-12-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-12-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-12-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-12-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>MRTSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-12-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>hawkerSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-12-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>busSG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-12-7.png" width="624" /></p>
</div>
<h1 id="section-a-airbnb-distribution-in-2019">4. Section A: Airbnb Distribution in 2019</h1>
<h1 id="first-order-spatial-point-patterns-analysis-a.-deriving-kernel-density-estimation-kde-layer-for-visualising-and-exploring-the-intensity-of-point-processes">4.1 First-order Spatial Point Patterns Analysis: A. deriving kernel density estimation (KDE) layer for visualising and exploring the intensity of point processes</h1>
<h2 id="a.-computing-kernel-density-estimation-using-automatic-bandwidth-selection-method">a. Computing kernel density estimation using automatic bandwidth selection method</h2>
<h4 id="using-sigma-bw.diggle">Using sigma = bw.diggle</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>listings19SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>listings19SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#plot</span>
<span class='va'>kde_listings19SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>hotelsSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hotelsSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#plot</span>
<span class='va'>kde_hotelsSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>tourismSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>tourismSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#plot</span>
<span class='va'>kde_tourismSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>MRTSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>MRTSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#plot</span>
<span class='va'>kde_MRTSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>MRTSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>hawkerSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>hawkerSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#plot</span>
<span class='va'>kde_hawkerSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hawkerSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>busSG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>busSG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#plot</span>
<span class='va'>kde_busSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>busSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.diggle</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_bw</span>, main <span class='op'>=</span> <span class='st'>"listings19"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-13-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw</span>, main <span class='op'>=</span> <span class='st'>"hotels"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-13-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_bw</span>, main <span class='op'>=</span> <span class='st'>"tourism"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-13-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_MRTSG_bw</span>, main <span class='op'>=</span> <span class='st'>"MRT"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-13-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hawkerSG_bw</span>, main <span class='op'>=</span> <span class='st'>"hawker"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-13-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_busSG_bw</span>, main <span class='op'>=</span> <span class='st'>"bus"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-13-6.png" width="624" /></p>
</div>
<h4 id="retrieve-the-bandwidth-used-to-compute-the-kde-layer">RETRIEVE THE BANDWIDTH USED TO COMPUTE THE KDE LAYER</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>'bandwidth for listings19: '</span>, <span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span>, <span class='st'>'\n'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>'bandwidth for hotels: '</span>, <span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span><span class='op'>)</span>, <span class='st'>'\n'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>'bandwidth for tourism: '</span>, <span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span><span class='op'>)</span>, <span class='st'>'\n'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>'bandwidth for MRT: '</span>, <span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>MRTSG_ppp.km</span><span class='op'>)</span>, <span class='st'>'\n'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>'bandwidth for hawker: '</span>, <span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>hawkerSG_ppp.km</span><span class='op'>)</span>, <span class='st'>'\n'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/cat.html'>cat</a></span><span class='op'>(</span><span class='st'>'bandwidth for bus: '</span>, <span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>busSG_ppp.km</span><span class='op'>)</span>, <span class='st'>'\n'</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/bandwidth.JPG" /></p>
<ul>
<li>Besides bw.diggle(), we can also use bw.ppl() automatic bandwidth selection method, lets try to use it</li>
</ul>
<h4 id="lets-try-to-look-at-the-bandwidths-returned-by-these-two-methods-first">Lets try to look at the bandwidths returned by these two methods first</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#let's see some examples</span>
<span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>     sigma 
0.04196627 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.ppl</span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>    sigma 
0.2221047 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   sigma 
1.707565 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.ppl</span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>   sigma 
8.276187 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.diggle</span><span class='op'>(</span><span class='va'>busSG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>    sigma 
0.3927249 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>bw.ppl</span><span class='op'>(</span><span class='va'>busSG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>    sigma 
0.1104879 </code></pre>
</div>
<ul>
<li>We can see for listings19SG_ppp.km and tourismSG_ppp.km Diggle algorithm gives narrower bandwiths while for busSG_ppp.km it gives broader bandwiths.</li>
</ul>
<h4 id="using-sigma-bw.ppl">Using sigma = bw.ppl</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_listings19SG_ppl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.ppl</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='va'>kde_hotelsSG_ppl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.ppl</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='va'>kde_tourismSG_ppl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.ppl</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='va'>kde_MRTSG_ppl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>MRTSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.ppl</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_hawkerSG_ppl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hawkerSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.ppl</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_busSG_ppl</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>busSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='va'>bw.ppl</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="plot-and-compare-bw.diggle-and-bw.ppl">plot and compare bw.diggle and bw.ppl</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_bw</span>, main <span class='op'>=</span> <span class='st'>"listings19 diggle"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_ppl</span>, main <span class='op'>=</span> <span class='st'>"listings19 ppl"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw</span>, main <span class='op'>=</span> <span class='st'>"hotels diggle"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_ppl</span>, main <span class='op'>=</span> <span class='st'>"hotels ppl"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_bw</span>, main <span class='op'>=</span> <span class='st'>"tourism diggle"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_ppl</span>, main <span class='op'>=</span> <span class='st'>"tourism ppl"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_MRTSG_bw</span>, main <span class='op'>=</span> <span class='st'>"MRT diggle"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-7.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_MRTSG_ppl</span>, main <span class='op'>=</span> <span class='st'>"MRT ppl"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-8.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hawkerSG_bw</span>, main <span class='op'>=</span> <span class='st'>"hawker diggle"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-9.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hawkerSG_ppl</span>, main <span class='op'>=</span> <span class='st'>"hawker ppl"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-10.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_busSG_bw</span>, main <span class='op'>=</span> <span class='st'>"bus diggle"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-11.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_busSG_ppl</span>, main <span class='op'>=</span> <span class='st'>"bus ppl"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-17-12.png" width="624" /></p>
</div>
<ul>
<li>We can see that for graphs consist predominantly of tight clusters (all the graphs besides bus), bw.ppl produce the more appropriate values; for graphs that consist lots of spreading points (bus graph, clusters not tight and predominant), bw.diggle is good at detecting at/emphasizing on clusters among those points. This observation is in accord with Baddeleys (2016) observation. However, since the spreading points for SG bus stops are all legit and not random noise, its better to use bw.diggle for this study.</li>
</ul>
<h2 id="b.-computing-kernel-density-estimation-using-fixedadaptive-bandwidth-method">b. Computing kernel density estimation using fixed/adaptive bandwidth method</h2>
<h4 id="using-fixed-bandwidth">using fixed bandwidth</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#compute a KDE layer by defining a bandwidth of 1000 meter. Notice the sigma value used is 1. This is because the unit of measurement of childcareSG_ppp.km object is in kilometer, hence the 1000m is 1km.</span>

<span class='va'>kde_listings19SG_bw_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='fl'>1</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='va'>kde_hotelsSG_bw_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='fl'>1</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='va'>kde_tourismSG_bw_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='fl'>1</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span> 

<span class='va'>kde_MRTSG_bw_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>MRTSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='fl'>1</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_hawkerSG_bw_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>hawkerSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='fl'>1</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_busSG_bw_1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='va'>busSG_ppp.km</span>,
                              sigma<span class='op'>=</span><span class='fl'>1</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="using-adaptive-bandwidth">using adaptive bandwidth</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>kde_listings19SG_adaptive</span> <span class='op'>&lt;-</span> <span class='fu'>adaptive.density</span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span>, method<span class='op'>=</span><span class='st'>"kernel"</span><span class='op'>)</span>

<span class='va'>kde_hotelsSG_adaptive</span> <span class='op'>&lt;-</span> <span class='fu'>adaptive.density</span><span class='op'>(</span><span class='va'>hotelsSG_ppp.km</span>, method<span class='op'>=</span><span class='st'>"kernel"</span><span class='op'>)</span>

<span class='va'>kde_tourismSG_adaptive</span> <span class='op'>&lt;-</span> <span class='fu'>adaptive.density</span><span class='op'>(</span><span class='va'>tourismSG_ppp.km</span>, method<span class='op'>=</span><span class='st'>"kernel"</span><span class='op'>)</span>

<span class='va'>kde_MRTSG_adaptive</span> <span class='op'>&lt;-</span> <span class='fu'>adaptive.density</span><span class='op'>(</span><span class='va'>MRTSG_ppp.km</span>, method<span class='op'>=</span><span class='st'>"kernel"</span><span class='op'>)</span>

<span class='va'>kde_hawkerSG_adaptive</span> <span class='op'>&lt;-</span> <span class='fu'>adaptive.density</span><span class='op'>(</span><span class='va'>hawkerSG_ppp.km</span>, method<span class='op'>=</span><span class='st'>"kernel"</span><span class='op'>)</span>

<span class='va'>kde_busSG_adaptive</span> <span class='op'>&lt;-</span> <span class='fu'>adaptive.density</span><span class='op'>(</span><span class='va'>busSG_ppp.km</span>, method<span class='op'>=</span><span class='st'>"kernel"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="plot-and-compare-fixed-and-adaptive-bandwidth">plot and compare fixed and adaptive bandwidth</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_bw_1</span>, main <span class='op'>=</span> <span class='st'>"listings19 fixed"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_adaptive</span>, main <span class='op'>=</span> <span class='st'>"listings19 adaptive"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw_1</span>, main <span class='op'>=</span> <span class='st'>"hotels fixed"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hotelsSG_adaptive</span>, main <span class='op'>=</span> <span class='st'>"hotels adaptive"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_bw_1</span>, main <span class='op'>=</span> <span class='st'>"tourism fixed"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_tourismSG_adaptive</span>, main <span class='op'>=</span> <span class='st'>"tourism adaptive"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_MRTSG_bw_1</span>, main <span class='op'>=</span> <span class='st'>"MRT fixed"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-7.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_MRTSG_adaptive</span>, main <span class='op'>=</span> <span class='st'>"MRT adaptive"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-8.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hawkerSG_bw_1</span>, main <span class='op'>=</span> <span class='st'>"hawker fixed"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-9.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_hawkerSG_adaptive</span>, main <span class='op'>=</span> <span class='st'>"hawker adaptive"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-10.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_busSG_bw_1</span>, main <span class='op'>=</span> <span class='st'>"bus fixed"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-11.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_busSG_adaptive</span>, main <span class='op'>=</span> <span class='st'>"bus adaptive"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-20-12.png" width="624" /></p>
</div>
<ul>
<li>From the graphs above we can see fixed bandwidth method is very sensitive to highly skew distribution of spatial point patterns over geographical units. However for adaptive bandwidth method, it is not that good to identify the important clusters, for example the tourism graph and the bus graph. Thus for this study, the best estimate for kernel density is by using auto bandwidth method bw.diggle.</li>
</ul>
<h2 id="c.-convert-kde-output-into-raster-and-display-the-kernel-density-maps-on-openstreetmap-of-singapore">c.Convert KDE output into raster and display the kernel density maps on openstreetmap of Singapore</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># convert KDE output into grid</span>
<span class='va'>gridded_kde_listings19SG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings19SG_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_hotelsSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_tourismSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_MRTSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_MRTSG_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_hawkerSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_hawkerSG_bw</span><span class='op'>)</span>
<span class='va'>gridded_kde_busSG_bw</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_busSG_bw</span><span class='op'>)</span>

<span class='co'># convert gridded output into raster</span>
<span class='va'>kde_listings19SG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings19SG_bw</span><span class='op'>)</span>
<span class='va'>kde_hotelsSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_hotelsSG_bw</span><span class='op'>)</span>
<span class='va'>kde_tourismSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_tourismSG_bw</span><span class='op'>)</span>
<span class='va'>kde_MRTSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_MRTSG_bw</span><span class='op'>)</span>
<span class='va'>kde_hawkerSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_hawkerSG_bw</span><span class='op'>)</span>
<span class='va'>kde_busSG_bw_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_busSG_bw</span><span class='op'>)</span>

<span class='co'># assign projection system to raster</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings19SG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_MRTSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_hawkerSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_busSG_bw_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>

<span class='co'># visualise the raster kernel density maps on openstreetmap of Singapore</span>
<span class='co'>#tmap_mode("view")</span>
<span class='fu'>tmap_options</span><span class='op'>(</span>check.and.fix <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>listings19SG_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings19SG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"listings19SG"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>hotelsSG_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_hotelsSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"hotelsSG"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>tourismSG_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_tourismSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"tourismSG"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>MRTSG_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_MRTSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"MRTSG"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>hawkerSG_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_hawkerSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"hawkerSG"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>busSG_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_busSG_bw_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"busSG"</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings19SG_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-21-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hotelsSG_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-21-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>tourismSG_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-21-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>MRTSG_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-21-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>hawkerSG_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-21-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>busSG_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-21-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>'plot'</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<ul>
<li>From the above kernel density maps and their respective bandwidths:
<ul>
<li>For 2019 Airbnb listings, within a bandwidth of 42 meters, most of the places in Singapore have &lt;500 Airbnbs. A few locations near Suntec City have 500~1500+ Airbnbs.</li>
<li>For hotels, within a bandwidth of 75 meters, most of the places in Singapore have &lt;50 hotels. Similar to Airbnb listings, a few locations near Suntec City have 50~150+ hotels.</li>
<li>For tourist attractions, within a bandwidth of 2km, most of the places in Singapore have &lt;0.01 tourist attractions. A few locations near Yi Shun, Sin Ming, West Coast and East Coast have 0.03~0.07 tourist attractions.</li>
<li>For MRT stations, within a bandwidth of 746 meters, most of the places in Singapore have 0~0.5 MRT stations. A few locations near Punggol, City Hall and Bukit Panjang can have up to 2-3 MRT stations.</li>
<li>For hawker centers, within a bandwidth of 630 meters, most of the places in Singapore have &lt;0.5 hawker centers. Some locations such as Tiong Bahru and Chinatown can have up to 2-3 hawker centers.</li>
<li>For bus stops, within a bandwidth of 393 meters, most of the places in Singapore have &lt;5 bus stops. However, many places in Singapore have 15~20 bus stops and some locations even have up to 25+ bus stops.</li>
</ul></li>
<li>Advantages of kernel density maps over point maps:
<ul>
<li>Many times point maps may have points overlaped and it is very visual unfriendly to to judge their density. However, for kernel density maps, the density are displayed beautifully and clearly.</li>
<li>Kernel density maps can reveal the density for every single location on the map, which is difficult to judge for point maps.</li>
<li>It is very subjective for people to judge the density via point map, however, using kernel density map, density is standardized and well-calculated, it is objective and can be used for further analysis.</li>
</ul></li>
</ul>
<h1 id="second-order-spatial-point-patterns-analysis-cross-k-function-and-cross-l-function">4.2 Second-order Spatial Point Patterns Analysis: Cross K-Function and Cross L-Function</h1>
<ul>
<li>In order to investigate if the distribution of Airbnb listings are affected by location factors, I am going to use Cross K-Function and Cross L-Function to see if they are spatial independent with each other.</li>
<li>The 5 location factors I am going to investigate with 2019 Airbnb listings are: hotels, tourist attractions, MRT stations, hawker centres and bus stops.</li>
</ul>
<h2 id="a.-prepare-merged-ppp-objects-by-using-superimpose">a. Prepare merged ppp objects by using superimpose()</h2>
<ul>
<li>In order to do Cross K-Function and Cross L-Function, I need to have merged ppp objects of the two factors I want to compare independence</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hotels</span><span class='op'>&lt;-</span> <span class='fu'>superimpose</span><span class='op'>(</span><span class='st'>'listings19'</span><span class='op'>=</span><span class='va'>listings19SG_ppp.km</span>, <span class='st'>'hotels'</span><span class='op'>=</span><span class='va'>hotelsSG_ppp.km</span><span class='op'>)</span>

<span class='va'>listings19_vs_tourism</span><span class='op'>&lt;-</span> <span class='fu'>superimpose</span><span class='op'>(</span><span class='st'>'listings19'</span><span class='op'>=</span><span class='va'>listings19SG_ppp.km</span>, <span class='st'>'tourism'</span><span class='op'>=</span><span class='va'>tourismSG_ppp.km</span><span class='op'>)</span>

<span class='va'>listings19_vs_MRT</span><span class='op'>&lt;-</span> <span class='fu'>superimpose</span><span class='op'>(</span><span class='st'>'listings19'</span><span class='op'>=</span><span class='va'>listings19SG_ppp.km</span>, <span class='st'>'MRT'</span><span class='op'>=</span><span class='va'>MRTSG_ppp.km</span><span class='op'>)</span>

<span class='va'>listings19_vs_hawker</span><span class='op'>&lt;-</span> <span class='fu'>superimpose</span><span class='op'>(</span><span class='st'>'listings19'</span><span class='op'>=</span><span class='va'>listings19SG_ppp.km</span>, <span class='st'>'hawker'</span><span class='op'>=</span><span class='va'>hawkerSG_ppp.km</span><span class='op'>)</span>

<span class='va'>listings19_vs_bus</span><span class='op'>&lt;-</span> <span class='fu'>superimpose</span><span class='op'>(</span><span class='st'>'listings19'</span><span class='op'>=</span><span class='va'>listings19SG_ppp.km</span>, <span class='st'>'bus'</span><span class='op'>=</span><span class='va'>busSG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h2 id="b.-second-order-multi-tpye-point-patterns-analysis-cross-k-function">b. Second-order Multi-tpye Point Patterns Analysis: Cross K-Function</h2>
<h4 id="note-1">Note:</h4>
<p>For each comparison between the 2019 Airbnb listings and one of the factors, Im going to plot the Kcross and perform a Complete Spatial Randomness(CSR) testing on the Cross K-Function.</p>
<p>The hypothesis are as follows: + H0 = The distribution of 2019 Airbnb listings and the factor are spatially independent. + H1 = The distribution of 2019 Airbnb listings and the factor are NOT spatially independent. + The null hypothesis will be rejected if p-value is smaller than alpha value of 0.01 (i.e.at 99% confident interval).</p>
<h4 id="i.-listings19-vs-hotels">i. listings19 vs hotels</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hotels_Kcross</span> <span class='op'>&lt;-</span> <span class='fu'>Kcross</span><span class='op'>(</span><span class='va'>listings19_vs_hotels</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hotels"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hotels_Kcross</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-23-1.png" width="624" /></p>
</div>
<ul>
<li>The plot above reveals that there is a sign that the marked spatial point events are not independent spatially. However, a hypothesis test is required to confirm the observation statistically.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hotels_Kcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_hotels</span>, <span class='va'>Kcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hotels"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hotels_Kcross.csr</span>, xlab<span class='op'>=</span><span class='st'>"distance(km)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_hotels_Kcross.png" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is above the envelop. Therefore, there is enough statistical evidence to reject the null hypothesis and say that the distribution of 2019 Airbnb listings and hotel locations are not independent spatially with each other at 99.9% confidence interval.</li>
</ul>
<h4 id="ii.-listings19-vs-tourism">ii. listings19 vs tourism</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_tourism_Kcross</span> <span class='op'>&lt;-</span> <span class='fu'>Kcross</span><span class='op'>(</span><span class='va'>listings19_vs_tourism</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"tourism"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_tourism_Kcross</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-25-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_tourism_Kcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_tourism</span>, <span class='va'>Kcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"tourism"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_tourism_Kcross.csr</span>, xlab<span class='op'>=</span><span class='st'>"distance(km)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_tourism_Kcross.png" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is within the envelop. Therefore, we failed to reject the null hypothesis. The distribution of 2019 Airbnb listings and tourism locations are independent spatially with each other at 99.9% confidence interval.</li>
</ul>
<h4 id="iii.-listings19-vs-mrt">iii. listings19 vs MRT</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_MRT_Kcross</span> <span class='op'>&lt;-</span> <span class='fu'>Kcross</span><span class='op'>(</span><span class='va'>listings19_vs_MRT</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"MRT"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_MRT_Kcross</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-27-1.png" width="624" /></p>
</div>
<ul>
<li>The plot above reveals that there is a sign that the marked spatial point events are not independent spatially. However, a hypothesis test is required to confirm the observation statistically.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_MRT_Kcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_MRT</span>, <span class='va'>Kcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"MRT"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_MRT_Kcross.csr</span>, xlab<span class='op'>=</span><span class='st'>"distance(m)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_MRT_Kcross.png" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is above the envelop. Therefore, there is enough statistical evidence to reject the null hypothesis and say that the distribution of 2019 Airbnb listings and MRT locations are not independent spatially with each other at 99.9% confidence interval.</li>
</ul>
<h4 id="iv.-listings19-vs-hawker">iv. listings19 vs hawker</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hawker_Kcross</span> <span class='op'>&lt;-</span> <span class='fu'>Kcross</span><span class='op'>(</span><span class='va'>listings19_vs_hawker</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hawker"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hawker_Kcross</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-29-1.png" width="624" /></p>
</div>
<ul>
<li>The plot above reveals that there is a sign that the marked spatial point events are not independent spatially. However, a hypothesis test is required to confirm the observation statistically.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hawker_Kcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_hawker</span>, <span class='va'>Kcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hawker"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hawker_Kcross.csr</span>, xlab<span class='op'>=</span><span class='st'>"distance(m)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_hawker_Kcross.png" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is above the envelop. Therefore, there is enough statistical evidence to reject the null hypothesis and say that the distribution of 2019 Airbnb listings and hawker center locations are not independent spatially with each other at 99.9% confidence interval.</li>
</ul>
<h4 id="v.-listings19-vs-bus">v. listings19 vs bus</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_bus_Kcross</span> <span class='op'>&lt;-</span> <span class='fu'>Kcross</span><span class='op'>(</span><span class='va'>listings19_vs_bus</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"bus"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_bus_Kcross</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-31-1.png" width="624" /></p>
</div>
<ul>
<li>The plot above reveals that there is a sign that the marked spatial point events are not independent spatially. However, a hypothesis test is required to confirm the observation statistically.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_bus_Kcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_bus</span>, <span class='va'>Kcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"bus"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_bus_Kcross.csr</span>, xlab<span class='op'>=</span><span class='st'>"distance(m)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_bus_Kcross.png" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is above the envelop. Therefore, there is enough statistical evidence to reject the null hypothesis and say that the distribution of 2019 Airbnb listings and bus stop locations are not independent spatially with each other at 99.9% confidence interval.</li>
</ul>
<h2 id="c.-second-order-multi-tpye-point-patterns-analysis-cross-l-function">c.Second-order Multi-tpye Point Patterns Analysis: Cross L-Function</h2>
<h4 id="note-2">Note:</h4>
<p>Cross L-Function and Cross K-Function are the actually the same but just Cross L-Function is the standardized version of Cross K-Function. Their CSR testing hypothesis, analysis and conclusions are all the same. I would just like to draw here the L-Functions for better visualization purpose.</p>
<h4 id="i.-listings19-vs-hotels-1">i. listings19 vs hotels</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hotels_Lcross</span> <span class='op'>&lt;-</span> <span class='fu'>Lcross</span><span class='op'>(</span><span class='va'>listings19_vs_hotels</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hotels"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hotels_Lcross</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, 
     xlab <span class='op'>=</span> <span class='st'>"distance(km)"</span>, 
     xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-33-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hotels_Lcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_hotels</span>, <span class='va'>Lcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hotels"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hotels_Lcross.csr</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, xlab<span class='op'>=</span><span class='st'>"distance(km)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_hotels_Lcross.png" /></p>
<h4 id="ii.-listings19-vs-tourism-1">ii. listings19 vs tourism</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_tourism_Lcross</span> <span class='op'>&lt;-</span> <span class='fu'>Lcross</span><span class='op'>(</span><span class='va'>listings19_vs_tourism</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"tourism"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_tourism_Lcross</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, 
     xlab <span class='op'>=</span> <span class='st'>"distance(km)"</span>, 
     xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-35-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_tourism_Lcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_tourism</span>, <span class='va'>Lcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"tourism"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_tourism_Lcross.csr</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, xlab<span class='op'>=</span><span class='st'>"distance(km)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_tourism_Lcross.png" /></p>
<h4 id="iii.-listings19-vs-mrt-1">iii. listings19 vs MRT</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_MRT_Lcross</span> <span class='op'>&lt;-</span> <span class='fu'>Lcross</span><span class='op'>(</span><span class='va'>listings19_vs_MRT</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"MRT"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_MRT_Lcross</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, 
     xlab <span class='op'>=</span> <span class='st'>"distance(km)"</span>, 
     xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-37-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_MRT_Lcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_MRT</span>, <span class='va'>Lcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"MRT"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_MRT_Lcross.csr</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, xlab<span class='op'>=</span><span class='st'>"distance(km)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_MRT_Lcross.png" /></p>
<h4 id="iv.-listings19-vs-hawker-1">iv. listings19 vs hawker</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hawker_Lcross</span> <span class='op'>&lt;-</span> <span class='fu'>Lcross</span><span class='op'>(</span><span class='va'>listings19_vs_hawker</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hawker"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hawker_Lcross</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, 
     xlab <span class='op'>=</span> <span class='st'>"distance(km)"</span>, 
     xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-39-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_hawker_Lcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_hawker</span>, <span class='va'>Lcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"hawker"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_hawker_Lcross.csr</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, xlab<span class='op'>=</span><span class='st'>"distance(km)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_hawker_Lcross.png" /></p>
<h4 id="v.-listings19-vs-bus-1">v. listings19 vs bus</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_bus_Lcross</span> <span class='op'>&lt;-</span> <span class='fu'>Lcross</span><span class='op'>(</span><span class='va'>listings19_vs_bus</span>, 
                           i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"bus"</span>,
                           correction<span class='op'>=</span><span class='st'>'border'</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_bus_Lcross</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, 
     xlab <span class='op'>=</span> <span class='st'>"distance(km)"</span>, 
     xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-41-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_vs_bus_Lcross.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19_vs_bus</span>, <span class='va'>Lcross</span>, i<span class='op'>=</span><span class='st'>"listings19"</span>, j<span class='op'>=</span><span class='st'>"bus"</span>, correction<span class='op'>=</span><span class='st'>'border'</span>, nsim<span class='op'>=</span><span class='fl'>99</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_vs_bus_Lcross.csr</span>, <span class='va'>.</span> <span class='op'>-</span><span class='va'>r</span> <span class='op'>~</span> <span class='va'>r</span>, xlab<span class='op'>=</span><span class='st'>"distance(km)"</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/listings19_vs_bus_Lcross.png" /></p>
<h2 id="d.-summary-cross-k-function-and-cross-l-function">d.Summary: Cross K-Function and Cross L-Function</h2>
<p>From the above Cross K-Function and Cross L-Function analysis, we can see among the 5 location factors, 2019 Airbnb listings are not independent with hotels, MRT stations, hawker centres and bus stops. These are be the factors that may bring Airbnb customers and profit so these Airbnb are located there. However, 2019 Airbnb listings are independent with tourist attractions, this may because the tourist attractions are too few to compare or Airbnb customers do not need to live near those attractions due to convenient MRT. All these observations are in accord with the patterns we see in our KDE maps of First-order analysis.</p>
<h1 id="section-b-impact-of-covid-19">5. Section B: Impact of COVID-19</h1>
<h1 id="first-order-spatial-point-patterns-analysis-a.-derive-kernel-density-maps-of-all-airbnb-listings-and-airbnb-by-room-type-as-at-june-2019-and-june-2021">5.1 First-order Spatial Point Patterns Analysis: A. Derive kernel density maps of all Airbnb listings and Airbnb by room type as at June 2019 and June 2021</h1>
<h2 id="a.-eda-and-geospatial-data-wrangling">a. EDA and Geospatial data wrangling</h2>
<h4 id="check-2019-and-2020-room-types">check 2019 and 2020 room types</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>listings19_sf</span><span class='op'>$</span><span class='st'>"room_type"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;Private room&quot;    &quot;Entire home/apt&quot; &quot;Shared room&quot;    </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>listings21_sf</span><span class='op'>$</span><span class='st'>"room_type"</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] &quot;Private room&quot;    &quot;Entire home/apt&quot; &quot;Shared room&quot;    
[4] &quot;Hotel room&quot;     </code></pre>
</div>
<ul>
<li>for 2019 Airbnbs there are 3 unique room types while for 2021 Airbnbs there are 4</li>
</ul>
<h4 id="filter-important-field-and-convert-to-spatialpointsdataframe">filter important field and convert to SpatialPointsDataFrame</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_sf</span> <span class='op'>&lt;-</span><span class='va'>listings19_sf</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>room_type</span><span class='op'>)</span>
<span class='va'>listings21_sf</span> <span class='op'>&lt;-</span><span class='va'>listings21_sf</span> <span class='op'>%&gt;%</span>
  <span class='fu'>select</span><span class='op'>(</span><span class='va'>room_type</span><span class='op'>)</span>

<span class='va'>listings19</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>listings19_sf</span><span class='op'>)</span>
<span class='va'>listings21</span> <span class='op'>&lt;-</span> <span class='fu'>as_Spatial</span><span class='op'>(</span><span class='va'>listings21_sf</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="change-marked-field-to-factor-data-type">change marked field to factor data type</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='st'>"room_type"</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>listings19</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='st'>"room_type"</span><span class='op'>)</span>
<span class='va'>listings21</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='st'>"room_type"</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='va'>listings21</span><span class='op'>@</span><span class='va'>data</span><span class='op'>$</span><span class='st'>"room_type"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<h4 id="peek-the-distribution">peek the distribution</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>"plot"</span><span class='op'>)</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>listings19</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'room_type'</span>, 
          size <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"2019 room_type"</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_facets</span><span class='op'>(</span>by<span class='op'>=</span><span class='st'>"room_type"</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-46-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>listings21</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_dots</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'room_type'</span>, 
          size <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>title <span class='op'>=</span> <span class='st'>"2021 room_type"</span><span class='op'>)</span> <span class='op'>+</span>
<span class='fu'>tm_facets</span><span class='op'>(</span>by<span class='op'>=</span><span class='st'>"room_type"</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-46-2.png" width="624" /></p>
</div>
<h4 id="convert-the-spatialpointsdataframe-into-ppp-point-pattern-in-spatstat-format">Convert the SpatialPointsDataFrame into ppp (point pattern in spatstat) format</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>listings19</span>, <span class='st'>"ppp"</span><span class='op'>)</span>
<span class='va'>listings21_ppp</span> <span class='op'>&lt;-</span> <span class='fu'>as</span><span class='op'>(</span><span class='va'>listings21</span>, <span class='st'>"ppp"</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-47-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings21_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-47-2.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>listings19_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Marked planar point pattern:  8293 points
Average intensity 9.345289e-06 points per square unit

*Pattern contains duplicated points*

Coordinates are given to 3 decimal places
i.e. rounded to the nearest multiple of 0.001 units

Multitype:
                frequency proportion    intensity
Entire home/apt      4264 0.51416860 4.805054e-06
Private room         3582 0.43193050 4.036516e-06
Shared room           447 0.05390088 5.037193e-07

Window: rectangle = [7215.57, 44098.31] x [25166.35, 49226.35] units
                    (36880 x 24060 units)
Window area = 887399000 square units</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/summary.html'>summary</a></span><span class='op'>(</span><span class='va'>listings21_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Marked planar point pattern:  4238 points
Average intensity 5.114513e-06 points per square unit

*Pattern contains duplicated points*

Coordinates are given to 3 decimal places
i.e. rounded to the nearest multiple of 0.001 units

Multitype:
                frequency proportion    intensity
Entire home/apt      1817 0.42874000 2.192796e-06
Hotel room            198 0.04672015 2.389508e-07
Private room         2050 0.48371870 2.473986e-06
Shared room           173 0.04082114 2.087803e-07

Window: rectangle = [7406.99, 43337.89] x [25330, 48391.55] units
                    (35930 x 23060 units)
Window area = 828622000 square units</code></pre>
</div>
<ul>
<li>The reports above reveal that in 2019 Entire home/apt is the most common Airbnb type with a market share of 51%, followed by Private room and Shared room. However, in 2021 Private room is the most common Airbnb type with a market share of 48%, followed by Entire home/apt, Hotel room and Shared room.</li>
<li>It is also important to node that the spatial point object contains duplicated points.</li>
</ul>
<h4 id="avoiding-duplicated-spatial-point-event-by-using-jittering-method">Avoiding duplicated spatial point event by using jittering method</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>listings19_ppp</span>, retry<span class='op'>=</span><span class='cn'>TRUE</span>, nsim<span class='op'>=</span><span class='fl'>1</span>, drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>listings21_ppp_jit</span> <span class='op'>&lt;-</span> <span class='fu'>rjitter</span><span class='op'>(</span><span class='va'>listings21_ppp</span>, retry<span class='op'>=</span><span class='cn'>TRUE</span>, nsim<span class='op'>=</span><span class='fl'>1</span>, drop<span class='op'>=</span><span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>listings19_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/base/any.html'>any</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/duplicated.html'>duplicated</a></span><span class='op'>(</span><span class='va'>listings21_ppp_jit</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>[1] FALSE</code></pre>
</div>
<h4 id="combining-ppp-and-owin-object">COMBINING ppp AND owin object</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19SG_ppp</span> <span class='op'>=</span> <span class='va'>listings19_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>
<span class='va'>listings21SG_ppp</span> <span class='op'>=</span> <span class='va'>listings21_ppp_jit</span><span class='op'>[</span><span class='va'>sg_owin</span><span class='op'>]</span>

<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-50-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>listings21SG_ppp</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-50-2.png" width="624" /></p>
</div>
<h2 id="b.-compute-kernel-density-estimation-using-fixed-bandwidth">b. Compute kernel density estimation using fixed bandwidth</h2>
<ul>
<li>Since I am going to compare Airbnb listings across time, I would like to make the bandwidth a fixed value for standard comparison. The bandwidth chosen is 0.18 (180 meters) referring to part A bw.ppl.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/par.html'>par</a></span><span class='op'>(</span>mar<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>listings19SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>listings19SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#split</span>
<span class='va'>kde_listings19SG_km_split</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span>,
                              sigma<span class='op'>=</span><span class='fl'>0.18</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_listings19SG_EH</span><span class='op'>&lt;-</span><span class='va'>kde_listings19SG_km_split</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>kde_listings19SG_PR</span><span class='op'>&lt;-</span><span class='va'>kde_listings19SG_km_split</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>kde_listings19SG_SR</span><span class='op'>&lt;-</span><span class='va'>kde_listings19SG_km_split</span><span class='op'>[[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>]</span>
<span class='co'>#plot</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_EH</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-51-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_PR</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-51-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings19SG_SR</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-51-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># Rescale KDE values: covert the unit of measurement from meter to kilometer.</span>
<span class='va'>listings21SG_ppp.km</span> <span class='op'>&lt;-</span> <span class='fu'>rescale</span><span class='op'>(</span><span class='va'>listings21SG_ppp</span>, <span class='fl'>1000</span>, <span class='st'>"km"</span><span class='op'>)</span>
<span class='co'>#split</span>
<span class='va'>kde_listings21SG_km_split</span> <span class='op'>&lt;-</span><span class='fu'><a href='https://rdrr.io/r/stats/density.html'>density</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings21SG_ppp.km</span><span class='op'>)</span>,
                              sigma<span class='op'>=</span><span class='fl'>0.18</span>,
                              edge<span class='op'>=</span><span class='cn'>TRUE</span>,
                            kernel<span class='op'>=</span><span class='st'>"gaussian"</span><span class='op'>)</span>

<span class='va'>kde_listings21SG_EH</span><span class='op'>&lt;-</span><span class='va'>kde_listings21SG_km_split</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>kde_listings21SG_HR</span><span class='op'>&lt;-</span><span class='va'>kde_listings21SG_km_split</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>kde_listings21SG_PR</span><span class='op'>&lt;-</span><span class='va'>kde_listings21SG_km_split</span><span class='op'>[[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>kde_listings21SG_SR</span><span class='op'>&lt;-</span><span class='va'>kde_listings21SG_km_split</span><span class='op'>[[</span><span class='fl'>4</span><span class='op'>]</span><span class='op'>]</span>
<span class='co'>#plot</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings21SG_EH</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-51-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings21SG_HR</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-51-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings21SG_PR</span><span class='op'>)</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-51-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>kde_listings21SG_SR</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-51-7.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>intensity</span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Entire home/apt    Private room     Shared room 
       5.693556        4.784029        0.597002 </code></pre>
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>intensity</span><span class='op'>(</span><span class='va'>listings21SG_ppp.km</span><span class='op'>)</span>
</code></pre>
</div>
<pre><code>Entire home/apt      Hotel room    Private room     Shared room 
      2.4267397       0.2644438       2.7379286       0.2310545 </code></pre>
</div>
<ul>
<li>The output reveals that in 2019 Entire home/apt type Airbnb has the highest density of 5.7 units per km square, followed by 4.78 units per km square for Private room and 0.6 unit per km square for Shared room. However, in 2021, Private room has the highest density of 2.74 units per km square, followed by 2.43 units per km square for Entire home/apt, 0.26 units per km square for Hotel room and 0.23 unit per km square for Shared room.</li>
</ul>
<h2 id="c.-convert-kde-output-into-raster-and-display-the-kernel-density-maps-on-openstreetmap-of-singapore-1">c.Convert KDE output into raster and display the kernel density maps on openstreetmap of Singapore</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># convert KDE output into grid</span>
<span class='va'>gridded_kde_listings19SG_EH</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings19SG_EH</span><span class='op'>)</span>
<span class='va'>gridded_kde_listings19SG_PR</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings19SG_PR</span><span class='op'>)</span>
<span class='va'>gridded_kde_listings19SG_SR</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings19SG_SR</span><span class='op'>)</span>

<span class='va'>gridded_kde_listings21SG_EH</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings21SG_EH</span><span class='op'>)</span>
<span class='va'>gridded_kde_listings21SG_HR</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings21SG_HR</span><span class='op'>)</span>
<span class='va'>gridded_kde_listings21SG_PR</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings21SG_PR</span><span class='op'>)</span>
<span class='va'>gridded_kde_listings21SG_SR</span> <span class='op'>&lt;-</span> <span class='fu'>as.SpatialGridDataFrame.im</span><span class='op'>(</span><span class='va'>kde_listings21SG_SR</span><span class='op'>)</span>

<span class='co'># convert gridded output into raster</span>
<span class='va'>kde_listings19SG_EH_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings19SG_EH</span><span class='op'>)</span>
<span class='va'>kde_listings19SG_PR_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings19SG_PR</span><span class='op'>)</span>
<span class='va'>kde_listings19SG_SR_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings19SG_SR</span><span class='op'>)</span>

<span class='va'>kde_listings21SG_EH_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings21SG_EH</span><span class='op'>)</span>
<span class='va'>kde_listings21SG_HR_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings21SG_HR</span><span class='op'>)</span>
<span class='va'>kde_listings21SG_PR_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings21SG_PR</span><span class='op'>)</span>
<span class='va'>kde_listings21SG_SR_raster</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='op'>(</span><span class='va'>gridded_kde_listings21SG_SR</span><span class='op'>)</span>

<span class='co'># assign projection system to raster</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings19SG_EH_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings19SG_PR_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings19SG_SR_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>

<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings21SG_EH_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings21SG_HR_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings21SG_PR_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
<span class='fu'>projection</span><span class='op'>(</span><span class='va'>kde_listings21SG_SR_raster</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='fu'>CRS</span><span class='op'>(</span><span class='st'>"+init=EPSG:3414 +datum=WGS84 +units=km"</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># visualise the raster kernel density maps on openstreetmap of Singapore</span>
<span class='co'>#tmap_mode("view")</span>
<span class='fu'>tmap_options</span><span class='op'>(</span>check.and.fix <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='va'>listings19SG_EH_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings19SG_EH_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>,breaks<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>50</span>, <span class='fl'>100</span>, <span class='fl'>150</span>, <span class='fl'>200</span>, <span class='fl'>250</span>, <span class='fl'>300</span>, <span class='fl'>350</span>, <span class='fl'>400</span>, <span class='fl'>1000</span><span class='op'>)</span>, alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"2019 Entire home/apt KDE"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings21SG_EH_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings21SG_EH_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>,breaks<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>50</span>, <span class='fl'>100</span>, <span class='fl'>150</span>, <span class='fl'>200</span>, <span class='fl'>250</span>, <span class='fl'>300</span>, <span class='fl'>350</span>, <span class='fl'>400</span>, <span class='fl'>1000</span><span class='op'>)</span>,alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"2021 Entire home/apt KDE"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings19SG_PR_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings19SG_PR_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>,breaks<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>50</span>, <span class='fl'>100</span>, <span class='fl'>150</span>, <span class='fl'>200</span>, <span class='fl'>250</span>, <span class='fl'>300</span>, <span class='fl'>350</span>, <span class='fl'>400</span>, <span class='fl'>1000</span><span class='op'>)</span>,alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"2019 Private Room KDE"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings21SG_PR_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings21SG_PR_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>,breaks<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>50</span>, <span class='fl'>100</span>, <span class='fl'>150</span>, <span class='fl'>200</span>, <span class='fl'>250</span>, <span class='fl'>300</span>, <span class='fl'>350</span>, <span class='fl'>400</span>, <span class='fl'>1000</span><span class='op'>)</span>,alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"2021 Private Room KDE"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings19SG_SR_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings19SG_SR_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>,breaks<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span>, <span class='fl'>20</span>, <span class='fl'>30</span>, <span class='fl'>40</span>, <span class='fl'>50</span>, <span class='fl'>60</span>, <span class='fl'>70</span>, <span class='fl'>80</span>, <span class='fl'>100</span><span class='op'>)</span>,alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"2019 Shared Room KDE"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings21SG_SR_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings21SG_SR_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>,breaks<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span>, <span class='fl'>20</span>, <span class='fl'>30</span>, <span class='fl'>40</span>, <span class='fl'>50</span>, <span class='fl'>60</span>, <span class='fl'>70</span>, <span class='fl'>80</span>, <span class='fl'>100</span><span class='op'>)</span>,alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"2021 Shared Room KDE"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings21SG_HR_osmap</span> <span class='op'>&lt;-</span> <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>sg_sf</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_borders</span><span class='op'>(</span>col <span class='op'>=</span> <span class='st'>'black'</span>,
             lwd <span class='op'>=</span> <span class='fl'>1</span>,
             alpha <span class='op'>=</span> <span class='fl'>0.5</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_shape</span><span class='op'>(</span><span class='va'>kde_listings21SG_HR_raster</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_raster</span><span class='op'>(</span><span class='st'>"v"</span>,breaks<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>10</span>, <span class='fl'>20</span>, <span class='fl'>30</span>, <span class='fl'>40</span>, <span class='fl'>50</span>, <span class='fl'>60</span>, <span class='fl'>70</span>, <span class='fl'>80</span>, <span class='fl'>100</span><span class='op'>)</span>,alpha <span class='op'>=</span> <span class='fl'>0.7</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>tm_layout</span><span class='op'>(</span>legend.outside <span class='op'>=</span> <span class='cn'>TRUE</span>, frame <span class='op'>=</span> <span class='cn'>FALSE</span>, title <span class='op'>=</span> <span class='st'>"2021 Hotel Room KDE"</span><span class='op'>)</span> <span class='op'>+</span> 
  <span class='fu'>tm_basemap</span><span class='op'>(</span><span class='st'>'OpenStreetMap'</span><span class='op'>)</span>

<span class='va'>listings19SG_EH_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-54-1.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21SG_EH_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-54-2.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19SG_PR_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-54-3.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21SG_PR_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-54-4.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19SG_SR_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-54-5.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21SG_SR_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-54-6.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings21SG_HR_osmap</span>
</code></pre>
</div>
<img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-54-7.png" width="624" />
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='fu'>tmap_mode</span><span class='op'>(</span><span class='st'>'plot'</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<ul>
<li>From the above kernel density maps, within a bandwidth of 180 meters:
<ul>
<li>For Entire Home type, there is an obvious decrease from around 300 in 2019 to around 100 in 2021 while the overall spatial patterns remain the same.</li>
<li>For Private Room type, there is a slight decrease from 2019 to 2021 while the overall spatial patterns remain the same.</li>
<li>For Shared Room type, there is an obvious decrease from around 75 in 2019 to around 35 in 2021 while the overall spatial patterns remain the same.</li>
<li>For Hotel Room type, there was no such type in 2019 but it increased up to around 45 in 2021.</li>
<li>Across spaces, four types of Airbnb all have similar patterns and are clustered around Suntec City, i.e.the central district area of Singapore.</li>
</ul></li>
</ul>
<h1 id="second-order-spatial-point-patterns-analysis-g-function-and-f-function">5.2 Second-order Spatial Point Patterns Analysis: G-Function and F-Function</h1>
<ul>
<li>In order to analyse the impact of COVID-19 on Airbnb business in Singapore, besides focusing on the change in density which is evaluated by KDE, I am going to use G-Function and F-Function to analyse the distribution of Airbnb business in 2019 and 2021, focusing on the extent of randomness/clustering.</li>
<li>Types of Airbnbs for analysis: Entire Home type, Private Room type, Shared Room type. Since Hotel Room type only exists in 2021, it will not be my main focus for this study.</li>
</ul>
<h2 id="note-3">Note</h2>
<p>For each function used, I will also perform a Complete Spatial Randomness(CSR) testing on it. The hypothesis are the same for both functions:</p>
<p>The hypothesis are as follows: + H0 = The distribution of that type of Airbnb are randomly distributed in Singapore. + H1= The distribution of that type of Airbnb are not randomly distributed in Singapore. + The null hypothesis will be rejected if p-value is smaller than alpha value of 0.01 (i.e.at 99% confident interval).</p>
<h2 id="a.-prepare-split-ppp-objects">a. Prepare split ppp objects</h2>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='va'>listings19SG_EH</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>listings19SG_PR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>2</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>listings19SG_SR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings19SG_ppp.km</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>]</span>

<span class='va'>listings21SG_EH</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings21SG_ppp.km</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>listings21SG_PR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings21SG_ppp.km</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>3</span><span class='op'>]</span><span class='op'>]</span>
<span class='va'>listings21SG_SR</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/split.html'>split</a></span><span class='op'>(</span><span class='va'>listings21SG_ppp.km</span><span class='op'>)</span><span class='op'>[[</span><span class='fl'>4</span><span class='op'>]</span><span class='op'>]</span>
</code></pre>
</div>
</div>
<h2 id="b.-analysing-spatial-point-process-using-g-function">b. Analysing Spatial Point Process Using G-Function</h2>
<ul>
<li>The G function measures the distribution of the distances from an arbitrary event to its nearest event.</li>
</ul>
<p><img src="data/capture2.JPG" /> <img src="data/capture3.JPG" /></p>
<h4 id="entire-home">Entire Home</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 2019</span>
<span class='va'>G_19_EH</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>listings19SG_EH</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_19_EH</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-56-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH G-FUCNTION</span>
<span class='va'>G_19_EH.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19SG_EH</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_19_EH.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/G_19_EH.png" /> * From 0km to 0.5km, the observed(black) line is above the envelop, indicating there is enough evidence to reject the null hypothesis and say that Entire Home Airbnbs resemble clustered pattern. This can also be seen as G increases rapidly at short distance above the theoretical(red) line. However, from about 0.5km onward, we noticed that the observed(black) line goes along with (in) the envelope. This means that there is not enough evidence to reject the null hypothesis and suggesting Entire Home Airbnbs resemble randomness above 0.5m.</p>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 2021</span>
<span class='va'>G_21_EH</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>listings21SG_EH</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_21_EH</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-58-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH G-FUCNTION</span>
<span class='va'>G_21_EH.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings21SG_EH</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_21_EH.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/G_21_EH.png" /> * Compared with 2019 Entire Home Airbnbs, similar patterns can be observed for 2021 Entire Home Airbnbs. However, for 2021 Entire Home Airbnbs, the part outside the envelop is longer, ranging from 0km to 0.8km.</p>
<h4 id="private-room">Private Room</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 2019</span>
<span class='va'>G_19_PR</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>listings19SG_PR</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_19_PR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-60-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH G-FUCNTION</span>
<span class='va'>G_19_PR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19SG_PR</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_19_PR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/G_19_PR.png" /></p>
<ul>
<li>From 0km to 0.6km, the observed(black) line is above the envelop, indicating there is enough evidence to reject the null hypothesis and say that Private Room Airbnbs resemble clustered pattern. This can also be seen as G increases rapidly at short distance above the theoretical(red) line. However, from about 0.6km onward, we noticed that the observed(black) line goes along with (in) the envelope. This means that there is not enough evidence to reject the null hypothesis and suggesting Private Room Airbnbs resemble randomness above 0.5m.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 2021</span>
<span class='va'>G_21_PR</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>listings21SG_PR</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_21_PR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-62-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH G-FUCNTION</span>
<span class='va'>G_21_PR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings21SG_PR</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_21_PR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/G_21_PR.png" /></p>
<ul>
<li>Compared with 2019 Private Room Airbnbs, similar patterns can be observed for 2021 Private Room Airbnbs. However, for 2021 Private Room Airbnbs, the part outside the envelop is longer, ranging from 0km to 0.8km.</li>
</ul>
<h4 id="shared-room">Shared Room</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 2019</span>
<span class='va'>G_19_SR</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>listings19SG_SR</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_19_SR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-64-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH G-FUCNTION</span>
<span class='va'>G_19_SR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19SG_SR</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_19_SR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/G_19_SR.png" /></p>
<ul>
<li>From 0km to 1.2km, the observed(black) line is above the envelop, indicating there is enough evidence to reject the null hypothesis and say that Shared Room Airbnbs resemble clustered pattern. This can also be seen as G increases rapidly at short distance above the theoretical(red) line. However, from about 1.2km onward, we noticed that the observed(black) line goes into (along with) the envelope. This means that there is not enough evidence to reject the null hypothesis and suggesting Shared Room Airbnbs resemble randomness or regular pattern above 1.2m.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'># 2021</span>
<span class='va'>G_21_SR</span> <span class='op'>=</span> <span class='fu'>Gest</span><span class='op'>(</span><span class='va'>listings21SG_SR</span>, correction <span class='op'>=</span> <span class='st'>"border"</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_21_SR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-66-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH G-FUCNTION</span>
<span class='va'>G_21_SR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings21SG_SR</span>, <span class='va'>Gest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>G_21_SR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/G_21_SR.png" /></p>
<ul>
<li>Compared with 2019 Shared Room Airbnbs, similar patterns can be observed for 2021 Shared Room Airbnbs. However, for 2021 Shared Room Airbnbs, the part outside the envelop is shorter, ranging from 0km to 1.4km.</li>
</ul>
<h2 id="c.-analysing-spatial-point-process-using-f-function">c.Analysing Spatial Point Process Using F-Function</h2>
<ul>
<li>The F function select a sample of point locations anywhere in the study region at random and determine minimum distance from each point to any event in the study area.</li>
</ul>
<p><img src="data/capture4.JPG" /> <img src="data/capture8.JPG" /></p>
<h4 id="entire-home-1">Entire Home</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#2019</span>
<span class='va'>F_19_EH</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>listings19SG_EH</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_19_EH</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-68-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH F-FUCNTION</span>
<span class='va'>F_19_EH.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19SG_EH</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_19_EH.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/F_19_EH.png" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is below the envelop, indicating there is enough evidence to reject the null hypothesis and say that Entire Home Airbnbs resemble clustered pattern at 99% confidence interval.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#2021</span>
<span class='va'>F_21_EH</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>listings21SG_EH</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_21_EH</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-70-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH F-FUCNTION</span>
<span class='va'>F_21_EH.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings21SG_EH</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_21_EH.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/F_21_EH.png" /></p>
<ul>
<li>2021 Entire Home Airbnbs F-function has similar pattern compared to 2019 Entire Home Airbnbss.</li>
</ul>
<h4 id="private-room-1">Private Room</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#2019</span>
<span class='va'>F_19_PR</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>listings19SG_PR</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_19_PR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-72-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH F-FUCNTION</span>
<span class='va'>F_19_PR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19SG_PR</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_19_PR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/F_19_PR.PNG" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is below the envelop, indicating there is enough evidence to reject the null hypothesis and say that Private Room Airbnbs resemble clustered pattern at 99% confidence interval.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#2021</span>
<span class='va'>F_21_PR</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>listings21SG_PR</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_21_PR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-74-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH F-FUCNTION</span>
<span class='va'>F_21_PR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings21SG_PR</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_21_PR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/F_21_PR.png" /></p>
<ul>
<li>2021 Private Room Airbnbs F-function has similar pattern compared to 2019 Private Room Airbnbss.</li>
</ul>
<h4 id="shared-room-1">Shared Room</h4>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#2019</span>
<span class='va'>F_19_SR</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>listings19SG_SR</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_19_SR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-76-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH F-FUCNTION</span>
<span class='va'>F_19_SR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings19SG_SR</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_19_SR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/F_19_SR.png" /></p>
<ul>
<li>From the graph above we can see the observed(black) line is below the envelop, indicating there is enough evidence to reject the null hypothesis and say that Shared Room Airbnbs resemble clustered pattern at 99% confidence interval.</li>
</ul>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#2021</span>
<span class='va'>F_21_SR</span> <span class='op'>=</span> <span class='fu'>Fest</span><span class='op'>(</span><span class='va'>listings21SG_SR</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_21_SR</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
<p><img src="take-home-exercise-2_files/figure-html5/unnamed-chunk-78-1.png" width="624" /></p>
</div>
<div class="layout-chunk" data-layout="l-body">
<div class="sourceCode">
<pre class="sourceCode r"><code class="sourceCode r"><span class='co'>#MONTE CARLO TEST WITH F-FUCNTION</span>
<span class='va'>F_21_SR.csr</span> <span class='op'>&lt;-</span> <span class='fu'>envelope</span><span class='op'>(</span><span class='va'>listings21SG_SR</span>, <span class='va'>Fest</span>, nsim <span class='op'>=</span> <span class='fl'>99</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>F_21_SR.csr</span>, xlim<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span><span class='op'>)</span>
</code></pre>
</div>
</div>
<p><img src="data/F_21_SR.png" /></p>
<ul>
<li>2021 Shared Room Airbnbs F-function has similar pattern compared to 2019 Shared Room Airbnbss.</li>
</ul>
<h2 id="d.-summary-g-function-and-k-function">d.Summary: G-Function and K-Function</h2>
<p>From the G-Function and K-Function analysis above, we can see for all types of Airbnbs in both 2019 and 2021 resemble cluster patterns within a distance and gradually resemble randomness or regular pattern when the distance increases. Usually, 2021 Airbnbs have a longer distance that resemble cluster patterns than 2019 Airbnbs. This may because the tightness of clusters in 2021 is lesser than that of clusters in 2019, as can be seen in our KDE maps of First-order analysis. In general, there are fewer Airbnbs in 2021 after covid but their locations and distributions are still similar to Airbnbs in 2019.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r distill-force-highlighting-css"><code class="sourceCode r"></code></pre></div>
<!--radix_placeholder_article_footer-->
<!--/radix_placeholder_article_footer-->
</div>

<div class="d-appendix">
</div>


<!--radix_placeholder_site_after_body-->
<!--/radix_placeholder_site_after_body-->
<!--radix_placeholder_appendices-->
<div class="appendix-bottom"></div>
<!--/radix_placeholder_appendices-->
<!--radix_placeholder_navigation_after_body-->
<!--/radix_placeholder_navigation_after_body-->

</body>

</html>
